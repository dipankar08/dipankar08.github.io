
<html>
<!--  this is an autogenerated file so any manuual chnages in this file will lost -->
<head>
    <title> Boook </title>
    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
<style>

    html {
        font-size: 100%;
        line-height: 1.6;
        font-family: 'Source Sans Pro', sans-serif;
    }
    body, a, body .top{ margin: 0 auto; color: #575757;background:white;}
    ol,ul{margin-bottom: 15px; margin-top:0;text-align: justify;}
    li{ margin-bottom: 5px;}

    div.code {
        white-space: pre;
        background: rgba(0, 0, 0, 0.1);
        color: black;
        padding: 5px;
        margin-bottom: 25px;
        font-size: 0.9rem;
        letter-spacing: .05px;
        font-family: monospace;
    }

    div.x1{ font-size: 3rem; text-align: center;margin-top: 50px;margin-bottom: 100px;}
    div.x2{ font-size: 1.5rem;margin-bottom: 25px;margin-top: 20px;}
    div.x3{ font-size: 1rem;margin-bottom: 10px;text-align: justify;}

    .top {
        position: fixed;
        height: 40px;
        border-bottom: 1px solid rgba(0,0,0,0.1);
        width: 100%;
        top: 0;
    }
    .middle { }
    .top .t { padding: 10px; margin-right:10px}
    .left {position:fixed;left: 0px;top: 50px;padding:5px;width: 300px;height: 100%; display:none;overflow: auto;border-right: 1px solid #575757;}
    .right{max-width: 800px; margin: 10px auto;padding:15px; margin-top:50px}

    a {display: block;font-family: 'Source Sans Pro', sans-serif; text-decoration: none; margin-bottom: 8px;}
    a.a1{font-weight:bold;font-size: 16px;}
    a.a2{margin-left:20px;}

    .footer{font-size: 11px;text-align: center;border-top: 1px solid #575757;}

    body.shown_menu .left {display:block}
    body.shown_menu .right {margin-left:320px;}

    body.dark,body.dark .top, body.dark a {background: #353535;color: #a7a0a0;}
    body.dark div.code {color: #0daf32;}

    /* Table Style */
    table {
        border-collapse: collapse;
        width:100%;
        margin-bottom: 50px;
    }
    table caption{
        background: rgba(0,0,0,0.75);
        color: white;
        font-weight: bold;
    }
    table th, table td, table caption{
        border: 1px solid rgba(0,0,0,0.1);
        padding: 10px;
    }
</style>
<script>
</script>
</head>
<body>
<div class="top">
     <span style='float:left'><b class="t" style="display: block;">Software Design Principles</b></span>
     <span style='float:right'>
        <i class="t fas fa-list-ul" onclick="$('body').toggleClass('shown_menu');"></i>
        <i class="t fas fa-lightbulb" onclick="$('body').toggleClass('dark');"></i>
    </span>
</div>
<div class="middle">
    <div class="left" style=""><a class='a1' href='#hashid1'+>Android Examples</a><a class='a2' href='#hashid2'+>Android Simple Activity</a><a class='a2' href='#hashid3'+>Activity Life Cycle Callback</a><a class='a2' href='#hashid4'+>Android Services Templates</a><a class='a2' href='#hashid5'+>Android Content Providers</a><a class='a2' href='#hashid6'+>Android Broadcast Receiver</a><a class='a2' href='#hashid7'+>Android UI designs</a><a class='a2' href='#hashid8'+>Android fragments</a><a class='a2' href='#hashid9'+>Executing Async Jobs in android.</a><a class='a2' href='#hashid10'+>WebSocket Support to Android</a><a class='a1' href='#hashid11'+>Support personalize Experice.</a><a class='a2' href='#hashid12'+>Supporting mutiple languages</a><a class='a2' href='#hashid13'+>Supporting seperate layout for differnt devices.</a><a class='a2' href='#hashid14'+>Supporting different button width for diffent devices.</a><a class='a2' href='#hashid15'+>Supporting multiple images</a><a class='a1' href='#hashid16'+>Android Networking</a><a class='a2' href='#hashid17'+>Connecting websocket</a><a class='a2' href='#hashid18'+>Simple Network Calls to parse JSON.</a></div>
    <div class="right" style=""><div class='x1' id='hashid1'>Android Examples</div>
<div class='x3'>This tutorials is mainly design for providing templates for android devlopment and helping out my copy-paste efficiency.</div>
<div class='x2' id='hashid2'>Android Simple Activity</div>
<div class='x3'>Below I am providing a simple templates for having a easy Activity which just have a Click buttons Clicking of that button shows a Toast. extremely Simple.</div>
<div class='x3'>Step1: Here is the Manifest.</div>
<div class='code'>
&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="in.co.dipankar.app"&gt;
    &lt;application
        android:allowBackup="true"
        android:icon="@mipmap/ic_launcher"
        android:label="@string/app_name"
        android:supportsRtl="true"
        android:theme="@style/AppTheme"&gt;
        &lt;activity android:name=".MainActivity"&gt;
            &lt;intent-filter&gt;
                &lt;action android:name="android.intent.action.MAIN" /&gt;
                &lt;category android:name="android.intent.category.LAUNCHER" /&gt;
            &lt;/intent-filter&gt;
        &lt;/activity&gt;
    &lt;/application&gt;
&lt;/manifest&gt;
</div>
<div class='x3'>Step 2: Here is the Layout</div>
<div class='code'>
&lt;RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" &gt;
    &lt;Button
        android:id="@+id/MyButton"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerInParent="true"
        android:text="Button" /&gt;
&lt;/RelativeLayout&gt;
</div>
<div class='x3'>Step 3: Here is the code:</div>
<div class='code'>
import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
public class MainActivity extends Activity {
	Button button;
	@Override
	public void onCreate(Bundle savedInstanceState) {
		super.onCreate(savedInstanceState);
		setContentView(R.layout.activity_main);
		button = (Button) findViewById(R.id.MyButton);
		button.setOnClickListener(new OnClickListener() {
			public void onClick(View arg0) {
        // DO Something.
			}
		});
	}
}
</div>
<div class='x2' id='hashid3'>Activity Life Cycle Callback</div>
<div class='x3'>In this section , we will discuss all the override functions of Activity and theoir purpose.</div>
<ul>
<li>We have all the lifecyclic callback.</li>
<li>How to support save and restore state</li>
<li>How to handle intent when app is already running.</li>
<li>How to ask Run time permission and how to handle that?</li>
</ul>
<div class='code'>
import android.os.Bundle;
import android.app.Activity;
import android.util.Log;
public class MainActivity extends Activity {
   String msg = "Android : ";
   /** Called when the activity is first created. */
   @Override
   public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.activity_main);
      Log.d(msg, "The onCreate() event");
      // You might call this and call the code should be in onNewIntent
      // onNewIntent(getIntent());
   }
   /** Called when the activity is about to become visible. */
   @Override
   protected void onStart() {
      super.onStart();
      Log.d(msg, "The onStart() event");
   }
   /** Called when the activity has become visible. */
   @Override
   protected void onResume() {
      super.onResume();
      Log.d(msg, "The onResume() event");
   }
   /** Called when another activity is taking focus. */
   @Override
   protected void onPause() {
      super.onPause();
      Log.d(msg, "The onPause() event");
   }
   /** Called when the activity is no longer visible. */
   @Override
   protected void onStop() {
      super.onStop();
      Log.d(msg, "The onStop() event");
   }
   /** Called just before the activity is destroyed. */
   @Override
   public void onDestroy() {
      super.onDestroy();
      Log.d(msg, "The onDestroy() event");
   }
   // Save /STore State - https://inthecheesefactory.com/blog/fragment-state-saving-best-practices/en
   // These variable are destroyed along with Activity
   private int someVarA;
   private String someVarB;
   @Override
   protected void onSaveInstanceState(Bundle outState) {
       super.onSaveInstanceState(outState);
       outState.putInt("someVarA", someVarA);
       outState.putString("someVarB", someVarB);
       Log.d(msg, "The onSaveInstanceState() event");
   }
   @Override
   protected void onRestoreInstanceState(Bundle savedInstanceState) {
       super.onRestoreInstanceState(savedInstanceState);
       someVarA = savedInstanceState.getInt("someVarA");
       someVarB = savedInstanceState.getString("someVarB");
       Log.d(msg, "The onRestoreInstanceState() event");
   }
   // onNewIntent() is meant as entry point for singleTop activities which already run somewhere else in the stack and therefore can't call onCreate()
   @Override
    protected void onNewIntent(Intent intent) {
        super.onNewIntent(intent);
        // getIntent() should always return the most recent
        setIntent(intent);
    }
    // Run time Permission
    private void askPermission(){
      if (Build.VERSION.SDK_INT &gt; Build.VERSION_CODES.LOLLIPOP_MR1) {
          if (!checkIfAlreadyhavePermission()) {
              requestForSpecificPermission();
          } else{
            proceedAfterPermission();
          }
      } else{
        proceedAfterPermission();
      }
    }
    private boolean checkIfAlreadyhavePermission() {
        int result = ContextCompat.checkSelfPermission(this, Manifest.permission.GET_ACCOUNTS);
        if (result == PackageManager.PERMISSION_GRANTED) {
            return true;
        } else {
            return false;
        }
    }
    private void requestForSpecificPermission() {
        ActivityCompat.requestPermissions(this, new String[]{Manifest.permission.GET_ACCOUNTS, Manifest.permission.RECEIVE_SMS, Manifest.permission.READ_SMS, Manifest.permission.READ_EXTERNAL_STORAGE, Manifest.permission.WRITE_EXTERNAL_STORAGE}, 101);
    }
    @Override
    public void onRequestPermissionsResult(int requestCode, String[] permissions, int[] grantResults) {
        switch (requestCode) {
            case 101:
                if (grantResults[0] == PackageManager.PERMISSION_GRANTED) {
                    //granted
                } else {
                    //not granted
                }
                break;
            default:
                super.onRequestPermissionsResult(requestCode, permissions, grantResults);
        }
    }
    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);
        if (requestCode == REQUEST_PERMISSION_SETTING) {
            if (ActivityCompat.checkSelfPermission(MultiplePermissionsActivity.this, permissionsRequired[0]) == PackageManager.PERMISSION_GRANTED) {
                //Got Permission
                proceedAfterPermission();
            }
        }
    }
    private void proceedAfterPermission() {
        txtPermissions.setText("We've got all permissions");
        Toast.makeText(getBaseContext(), "We got All Permissions", Toast.LENGTH_LONG).show();
    }
    @Override
    protected void onPostResume() {
        super.onPostResume();
        if (sentToSettings) {
            if (ActivityCompat.checkSelfPermission(MultiplePermissionsActivity.this, permissionsRequired[0]) == PackageManager.PERMISSION_GRANTED) {
                //Got Permission
                proceedAfterPermission();
            }
        }
    }
}
</div>
<div class='x3'>You need to add permission String in the menifest.</div>
<div class='code'>
&lt;uses-permission android:name="android.permission.CAMERA" /&gt;
&lt;uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" /&gt;
&lt;uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" /&gt;
</div>
<div class='x2' id='hashid4'>Android Services Templates</div>
<div class='x3'>A Service is an Android application component without a UI that runs on the main thread (of the hosting process). It also has to be declared in the AndroidManifest.xml</div>
<ol>
<li>A Started Service can be started by calling the startService(Intent)method in your Activity or Service. This Intent has to be an explicit Intent, which means that you either make a reference to the Service’s class</li>
</ol>
<div class='x3'>2.</div>
<div class='x3'>A Service can be started multiple times and each time  onStartCommand() is called, we can pass extra while stated which is received by this callback. Even if you start a Service multiple times, it will only call onCreate() only once. To stop a service by calling stopSelf() from it. If you stop from outside, you must call as stopService.When the Service does stop then it will call onDestroy().</div>
<div class='x3'>Service might be crashed or killed. In that case Service might be restarted base don the flag as it returned by onStartCommand.</div>
<ol>
<li>Service.START_STICKY - Service is restarted if it gets terminated. Intent data passed to the onStartCommand method is null. Used for services which manages their own state and do not depend on the Intent data.</li>
<li>Service.START_NOT_STICKY - Service is not restarted. this is used for services which are periodically triggered anyway. The service is only restarted if the runtime has pending startService() calls since the service termination.</li>
<li>Service.START_REDELIVER_INTENT - Similar to Service.START_STICKY but the original Intent is re-delivered to the onStartCommand method.</li>
</ol>
<div class='x3'>We can have comminucation between service and Activity. The service receives the intent data from the starting Android component and performs its work. So the communication from Activity to service is statght forword. However, We need to use Receive for communicating service to activity. In this case your activity can register a broadcast receiver for an event and the service sends outs corresponding events. Android provides the LocalBroadcastManager class in the support library v4. This is a helper class to register for and send broadcasts of Intents to local objects within your process.</div>
<div class='x3'>A sample service is giving as below:</div>
<ol>
<li>First Create a Service Calss.</li>
</ol>
<div class='code'>
import android.app.Service;
import android.os.IBinder;
import android.content.Intent;
import android.os.Bundle;
import android.widget.Toast;
public class HelloService extends Service {
   /** indicates how to behave if the service is killed */
   int mStartMode;
   /** interface for clients that bind */
   IBinder mBinder;
   /** indicates whether onRebind should be used */
   boolean mAllowRebind;
   /** Called when the service is being created. */
   @Override
   public void onCreate() {
   }
   /** The service is starting, due to a call to startService() */
   @Override
   public int onStartCommand(Intent intent, int flags, int startId) {
      //process intent
      Toast.makeText(this, "Service Started", Toast.LENGTH_LONG).show();
      return START_STICKY;
   }
   /** A client is binding to the service with bindService() */
   @Override
   public IBinder onBind(Intent intent) {
      return mBinder;
   }
   /** Called when all clients have unbound with unbindService() */
   @Override
   public boolean onUnbind(Intent intent) {
      return mAllowRebind;
   }
   /** Called when a client is binding to the service with bindService()*/
   @Override
   public void onRebind(Intent intent) {
   }
   /** Called when The service is no longer used and is being destroyed */
   @Override
   public void onDestroy() {
   super.onDestroy();
   Toast.makeText(this, "Service Destroyed", Toast.LENGTH_LONG).show();
   }
}
</div>
<div class='x3'>Step 2: Activity can start or stop Service as below:</div>
<div class='code'>
import android.content.Intent;
import android.support.v7.app.AppCompatActivity;
import android.os.Bundle;
import android.os.Bundle;
import android.app.Activity;
import android.util.Log;
import android.view.View;
public class MainActivity extends Activity {
   String msg = "Android : ";
   /** Called when the activity is first created. */
   @Override
   public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.activity_main);
      Log.d(msg, "The onCreate() event");
   }
   public void startService(View view) {
      startService(new Intent(getBaseContext(), MyService.class));
   }
   // Method to stop the service
   public void stopService(View view) {
      stopService(new Intent(getBaseContext(), MyService.class));
   }
}
</div>
<div class='x3'>Step 3: Dont forget to put thease into menufest.</div>
<div class='code'>
&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;manifest xmlns:android="http://schemas.android.com/apk/res/android"
   package="com.example.tutorialspoint7.myapplication"&gt;
   &lt;application
      android:allowBackup="true"
      android:icon="@mipmap/ic_launcher"
      android:label="@string/app_name"
      android:supportsRtl="true"
      android:theme="@style/AppTheme"&gt;
      &lt;activity android:name=".MainActivity"&gt;
         &lt;intent-filter&gt;
            &lt;action android:name="android.intent.action.MAIN" /&gt;
            &lt;category android:name="android.intent.category.LAUNCHER" /&gt;
         &lt;/intent-filter&gt;
      &lt;/activity&gt;
      &lt;service android:name=".MyService" /&gt;
   &lt;/application&gt;
&lt;/manifest&gt;
</div>
<div class='x3'>We have another kind of service call intent servivce: The Service can be used in tasks with no UI, but shouldn't be too long. If you need to perform long tasks, you must use threads within Service. The IntentService can be used in long tasks usually with no communication to Main Thread. If communication is required, can use Main Thread handler or broadcast intents. Another case of use is when callbacks are needed.</div>
<div class='x3'>Below example shows an Intent Service and a comminucation from service to Activity.</div>
<div class='x3'>Step1: Let;s have the service here.</div>
<div class='code'>
import android.app.IntentService;
import android.content.Intent;
public class CashbackIntentService extends IntentService{
    final static String CASHBACK_INFO = "cashback_info";
    public CashbackIntentService() {
        super("Cashback IntentService");
    }
    @Override
    protected void onHandleIntent(Intent intent) {
        String cb_category = intent.getStringExtra("cashback_cat");
        String cbinfo = getCashbackInfo(cb_category);
        sendCashbackInfoToClient(cbinfo);
    }
    private String getCashbackInfo(String cbcat){
        String cashback;
        if("electronics".equals(cbcat)){
            cashback = "Upto 20% cashback on electronics";
        }else if("fashion".equals(cbcat)){
            cashback = "Upto 60% cashbak on all fashion items";
        }else{
            cashback = "All other categories except fashion and electronics, flat 30% cashback";
        }
        return cashback;
    }
    // This runs on a worker thread.
    private void sendCashbackInfoToClient(String msg){
        Intent intent = new Intent();
        intent.setAction(CASHBACK_INFO);
        intent.putExtra("cashback",msg);
        sendBroadcast(intent);
        // LocalBroadcastManager.getInstance(this).sendBroadcast(intent);
    }
}
</div>
<div class='x3'>Step2: Let;s have the activity and Have a Broadcast Receiver.</div>
<div class='code'>
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.os.Bundle;
import android.support.v7.app.AppCompatActivity;
import android.view.View;
import android.widget.EditText;
import android.widget.TextView;
public class IntentServiceActivity extends AppCompatActivity {
    private CashbackReciver cashbackReciver;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_intentservice);
        registerCashbackReceiver();
        startCashbackService();
    }
    @Override
    protected void onStop() {
        super.onStop();
        unregisterReceiver(cashbackReciver);
    }
    public void startCashbackService(View view){
        Intent cbIntent =  new Intent();
        cbIntent.setClass(this, CashbackIntentService.class);
        cbIntent.putExtra("cashback_cat", "SomeText");
        startService(cbIntent);
    }
    private void registerCashbackReceiver(){
        cashbackReciver = new CashbackReciver();
        IntentFilter intentFilter = new IntentFilter();
        intentFilter.addAction(CashbackIntentService.CASHBACK_INFO);
        registerReceiver(cashbackReciver, intentFilter);
    }
    private class CashbackReciver extends BroadcastReceiver {
        @Override
        public void onReceive(Context context, Intent intent) {
            String cbinfo = intent.getStringExtra("cashback");
        }
    }
}
</div>
<div class='x2' id='hashid5'>Android Content Providers</div>
<div class='x2' id='hashid6'>Android Broadcast Receiver</div>
<div class='x2' id='hashid7'>Android UI designs</div>
<div class='x2' id='hashid8'>Android fragments</div>
<div class='x3'>A fragment is a reusable class implementing a portion of an activity.</div>
<ul>
<li>Reuseness: It's basically a combination of an XML layout file and a java class much like an Activity which encapsulate views and logic so that it is easier to reuse within activities.</li>
<li>Standalone: Fragments are standalone components that can contain views, events and logic.</li>
<li>Navigation patatrens: In a fragment-oriented architecture, activities become navigational containers that are primarily responsible for navigation fragment tp fragemnts/activity - presenting fragments and passing data.</li>
<li>Activities are navigation controllers primarily responsible for navigation to other activities through intents, where as Fragments are content controllers and contain most views, layouts, and event logic.</li>
<li>Like Activity, A fragment has an XML layout file and a Java class that represents the Fragment controller.</li>
<li>Fragment has it;s own lifecyclic callback functions: The onCreateView() method is called when Fragment should create its View object hierarchy. onViewCreated()  is triggered soon after onCreateView() and any view setup should performed here. Her have a list of other methos given Below</li>
</ul>
<div class='x3'>-- onAttach() is called when a fragment is connected to an activity.</div>
<div class='x3'>-- onCreate() is called to do initial creation of the fragment.</div>
<div class='x3'>-- onCreateView() is called by Android once the Fragment should inflate a view.</div>
<div class='x3'>-- onViewCreated() is called after onCreateView() and ensures that the fragment's root view is non-null. Any view setup should happen here. E.g., view lookups, attaching listeners.</div>
<div class='x3'>-- onActivityCreated() is called when host activity has completed its onCreate() method.</div>
<div class='x3'>-- onStart() is called once the fragment is ready to be displayed on screen.</div>
<div class='x3'>-- onResume() - Allocate “expensive” resources such as registering for location, sensor updates, etc.</div>
<div class='x3'>-- onPause() - Release “expensive” resources. Commit any changes.</div>
<div class='x3'>-- onDestroyView() is called when fragment's view is being destroyed, but the fragment is still kept around.</div>
<div class='x3'>-- onDestroy() is called when fragment is no longer in use.</div>
<div class='x3'>-- onDetach() is called when fragment is no longer connected to the activity.</div>
<ul>
<li>Fragment can't work by alone. It must be embeded inside the Activity  - either in XML files or adding it dynamically. It can be noted that, Before embedding a "support" fragment in an Activity make sure the Activity is changed to extend from FragmentActivity or AppCompatActivity which adds support for the fragment manager to all Android versions.</li>
<li>If we have Fragment Holder, it is possible to add, remkove and replace fragemnts uisng  FragmentTransaction .</li>
<li>Fragments should generally only communicate with their direct parent activity. If two fragemnts needs to comunicate, they should do that though Activity. Here, Activity is treaed as the controller managing all interaction with each of the fragments contained within. fragments should not directly communicate with each other as they needs to be modular, standalone and reusable component. Here are the possible way to do the communication:</li>
</ul>
<ol>
<li>Activities can initialize fragments with data during construction: pass data though the constracter of fragmnets.</li>
<li>Activities can pass data to fragments using methods on the fragment instance: Pass data using member function of fragments,</li>
<li>Fragments can communicate up to their parent activity using an interface and listeners: Fragemnt defines the callback inetrface and Parenet implementing it.</li>
<li>Fragments should pass data to other fragments only routed through their parent activity</li>
<li>Fragments can pass data to and from dialog fragments though the interface like sendBackResult.</li>
<li>Fragments can contain nested child fragments as outlined here</li>
</ol>
<div class='x3'>First, let;s define a xml file which will be render as a part of fragemnts</div>
<div class='code'>
&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent" android:layout_height="match_parent"
    android:orientation="vertical" &gt;
    &lt;TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="TextView" /&gt;
    &lt;Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button" /&gt;
&lt;/LinearLayout&gt;
</div>
<div class='x3'>Second, Let's define the Fragment class which influate the view in xmlns</div>
<div class='code'>
import android.support.v4.app.Fragment;
public class FooFragment extends Fragment {
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup parent, Bundle savedInstanceState) {
        return inflater.inflate(R.layout.fragment_foo, parent, false);
    }
    @Override
    public void onViewCreated(View view, Bundle savedInstanceState) {
        // EditText etFoo = (EditText) view.findViewById(R.id.etFoo);
        // Add listners
    }
}
</div>
<div class='x3'>Thirds, Now we can add the fragemnts inside activity layout as</div>
<div class='code'>
&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" &gt;
    &lt;fragment
        android:name="com.example.android.FooFragment"
        android:id="@+id/fooFragment"
        android:layout_width="match_parent"
        android:layout_height="match_parent" /&gt;
&lt;/LinearLayout&gt;
</div>
<div class='x3'>OR</div>
<div class='code'>
&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" &gt;
  &lt;FrameLayout
       android:id="@+id/your_placeholder" &lt;&lt;&lt; Placeholder
       android:layout_width="match_parent"
       android:layout_height="match_parent"&gt;
  &lt;/FrameLayout&gt;
&lt;/LinearLayout&gt;
</div>
<div class='x3'>Forth, This can now refer by Activity( if it is statically linked) or can be loaded dynamically using FragmentManager. We can lookup fragments either using ID or TAG or Pagers</div>
<div class='code'>
public class MainActivity extends AppCompatActivity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        if (savedInstanceState == null) {
          // Look up by ID.
          DemoFragment fragmentDemo = (DemoFragment)
              getSupportFragmentManager().findFragmentById(R.id.fragmentDemo);
          //ADD THE TAG
          getSupportFragmentManager().beginTransaction().
              replace(R.id.flContainer, new DemoFragment(), "SOMETAG").
              commit();
          // Now later we can lookup the fragment by tag
          DemoFragment fragmentDemo = (DemoFragment)
              getSupportFragmentManager().findFragmentByTag("SOMETAG");
          // If you have view pager do this like.
          adapterViewPager.getRegisteredFragment(0);
          // Add Fragemnts Dynamically: It;s a three step procress.
          FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
          ft.replace(R.id.your_placeholder, new FooFragment());
          ft.commit();
        }
    }
}
</div>
<div class='x3'>Fifth, Let;s pass some data to the fragment while creating, generally It can be done using static method. This is because a Fragment must have only a constructor with no arguments.</div>
<div class='code'>
public class DemoFragment extends Fragment {
    // Creates a new fragment given an int and title
    // DemoFragment.newInstance(5, "Hello");
    public static DemoFragment newInstance(int someInt, String someTitle) {
        DemoFragment fragmentDemo = new DemoFragment();
        Bundle args = new Bundle();
        args.putInt("someInt", someInt);
        args.putString("someTitle", someTitle);
        fragmentDemo.setArguments(args);
        return fragmentDemo;
    }
   @Override
   public void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       int SomeInt = getArguments().getInt("someInt", 0);
       String someTitle = getArguments().getString("someTitle", "");
   }
}
// Calls from Activity.
public class MainActivity extends AppCompatActivity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
        DemoFragment fragmentDemo = DemoFragment.newInstance(5, "my title");
        ft.replace(R.id.your_placeholder, fragmentDemo);
        ft.commit();
    }
}
</div>
<div class='x3'>Let's define a fragemnt and pass the data on runtime.</div>
<div class='code'>
// Have Fragment
public class DemoFragment extends Fragment {
  public void doSomething(String param) {
      // handle this data.
  }
}
// In Activity.
public class MainActivity extends AppCompatActivity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        DemoFragment fragmentDemo = (DemoFragment)
            getSupportFragmentManager().findFragmentById(R.id.fragmentDemo);
        fragmentDemo.doSomething("some param");
    }
}
</div>
<div class='x3'>Now, Let;s try to pass some data from fragemnt to Activity.</div>
<div class='code'>
import android.support.v4.app.Fragment;
public class MyListFragment extends Fragment {
  private OnItemSelectedListener listener;
  public interface OnItemSelectedListener {
    public void onItemSelected(String link);
  }
  // Store the listener (activity) that will have events fired once the fragment is attached
  @Override
  public void onAttach(Context context) {
      super.onAttach(context);
      if (context instanceof OnItemSelectedListener) {
        listener = (OnItemSelectedListener) context;
      } else {
        throw new ClassCastException(context.toString()
            + " must implement MyListFragment.OnItemSelectedListener");
      }
  }
  public void onSomeClick(View v) {
     listener.onItemSelected("some link");
  }
}
// Activity implements the Callback.
import android.support.v7.app.AppCompatActivity;
public class RssfeedActivity extends AppCompatActivity implements MyListFragment.OnItemSelectedListener {
    private DetailFragment fragment;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_rssfeed);
        fragment = (DetailFragment) getSupportFragmentManager() .findFragmentById(R.id.detailFragment);
  }
  @Override
  public void onItemSelected(String link) {
      if (fragment != null && fragment.isInLayout()) {
          // Handle the result.
      }
  }
}
</div>
<div class='x3'>The FragmentManager is responsible for all runtime management of fragments including adding, removing, hiding, showing, or otherwise navigating between fragments. It suppprts below method to do some work:</div>
<ol>
<li>addOnBackStackChangedListener - Add a new listener for changes to the fragment back stack.</li>
<li>beginTransaction() - Creates a new transaction to change fragments at runtime.</li>
<li>findFragmentById(int id) -	Finds a fragment by id usually inflated from activity XML layout.</li>
<li>findFragmentByTag(String tag):	Finds a fragment by tag usually for a runtime added fragment.</li>
<li>popBackStack() -	Remove a fragment from the backstack.</li>
<li>executePendingTransactions()	Forces committed transactions to be applied.</li>
</ol>
<div class='x3'>Here is an example of Fragment Trasation:</div>
<div class='code'>
</div>
<div class='x3'>Using fragmen, it is possible to customize the backStack operation. A record of all Fragment transactions is kept for each Activity by the FragmentManager. When used properly, this allows the user to hit the device’s back button to remove previously added Fragments.</div>
<div class='code'>
//add to backStack
FragmentTransaction fts = getSupportFragmentManager().beginTransaction();
fts.replace(R.id.flContainer, new FirstFragment());
fts.addToBackStack("optional_tag");
fts.commit();
// Just remove the lastly added.
FragmentManager fragmentManager = getSupportFragmentManager();
if (fragmentManager.getBackStackEntryCount() &gt; 0) {
    fragmentManager.popBackStack();
}
//Just go back to specif TAG
FragmentManager fragmentManager = getSupportFragmentManager();
if (fragmentManager.getBackStackEntryCount() &gt; 0) {
    fragmentManager.popBackStack("optional_tag");
}
</div>
<div class='x3'>We can easily show/hide the fragemnt then calling replaces - This can be good because this will release memory and make the UI snappier. For example :</div>
<div class='code'>
private FragmentA fragmentA;
private FragmentB fragmentB;
private FragmentC fragmentC;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    if (savedInstanceState == null) {
        fragmentA = FragmentA.newInstance("foo");
        fragmentB = FragmentB.newInstance("bar");
        fragmentC = FragmentC.newInstance("baz");
    }
}
// NOT so good
protected void displayFragmentA() {
    FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
    // removes the existing fragment calling onDestroy
    ft.replace(R.id.flContainer, fragmentA);
    ft.commit();
}
// Better
protected void displayFragmentA() {
    FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
    if (fragmentA.isAdded()) { // if the fragment is already in container
        ft.show(fragmentA);
    } else { // fragment needs to be added to frame container
        ft.add(R.id.flContainer, fragmentA, "A");
    }
    // Hide fragment B
    if (fragmentB.isAdded()) { ft.hide(fragmentB); }
    // Hide fragment C
    if (fragmentC.isAdded()) { ft.hide(fragmentC); }
    // Commit changes
    ft.commit();
}
</div>
<div class='x2' id='hashid9'>Executing Async Jobs in android.</div>
<div class='x2' id='hashid10'>WebSocket Support to Android</div>
<div class='x3'>Step1: Let's consider the below example for build the server.</div>
<div class='code'>
const WebSocket = require('ws');
const wss = new WebSocket.Server({ port: 8080 });
wss.on('connection', function connection(ws) {
  ws.on('message', function incoming(message) {
    console.log('received: %s', message);
  });
  ws.send('something');
});
// Store this as server.js file.
// $node server.js
</div>
<div class='x3'>Step2: Let's test the code from sample HTML</div>
<div class='code'>
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
	&lt;meta charset="utf-8"&gt;
	&lt;title&gt; WebSocket&lt;/title&gt;
  &lt;script src="/socket.io/socket.io.js" &gt;&lt;/script&gt;
  &lt;script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.1.1/socket.io.js"&gt;&lt;/script&gt;
  &lt;script src="http://code.jquery.com/jquery-1.10.1.min.js"&gt;&lt;/script&gt;
  &lt;script&gt;
      var socket = io.connect('http://0.0.0.0:8088');
      socket.on('message', function (data) {
        console.log(data);
        socket.emit('my other event', { my: 'data' });
      });
      function send(){
        socket.emit('message', {tag: 'info',data:"hello"});
      }
  &lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;button type="button" onclick="send();"&gt;Click Me!&lt;/button&gt;
&lt;/body&gt;
&lt;/html&gt;
</div>
<div class='x3'>Step3: Now let's write android plagins to send and recv data from our server.</div>
<div class='code'>
</div>
<div class='x1' id='hashid11'>Support personalize Experice.</div>
<div class='x3'>In this perticulr section, i will be discussion with how to personalized your app experince for the user. The term "Personlization" means that your app should resposnce perfactly for the multiple devices, user can choose their languages and user can have their own theme etc.</div>
<div class='x2' id='hashid12'>Supporting mutiple languages</div>
<div class='x3'>Let's consider supporting hindi and english langues for a app.</div>
<div class='x3'>Step1: Let;s have this layout. Note that we NOT hardcoding the string.</div>
<div class='code'>
</div>
<div class='x3'>Step2: Define the defalut string in res/values/strings.xml.</div>
<div class='code'>
</div>
<div class='x3'>Step3: Define the hindi language string in res/values/strings-hi.xml. You can support mutiple languages using the file name as res/values/strings-<language-code>.xml</div>
<div class='code'>
</div>
<div class='x3'>Step 4: Now we we just have the  fun. You can go the device setting -> personal -> languages -> choose language and You will see the language of the app has chnages. We can do it programitically as below:</div>
<div class='code'>
import android.app.Activity;
import android.content.res.Configuration;
import android.os.Bundle;
public class Main extends Activity {
  /** Called when the activity is first created. */
  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    String languageToLoad  = "fa"; // your language "hi" for hindi and "en" for english
    Locale locale = new Locale(languageToLoad);
    Locale.setDefault(locale);
    Configuration config = new Configuration();
    config.locale = locale;
    getBaseContext().getResources().updateConfiguration(config,
      getBaseContext().getResources().getDisplayMetrics());
    this.setContentView(R.layout.main);
  }
  private void change(){
    Resources res = context.getResources();
    // Change locale settings in the app.
    DisplayMetrics dm = res.getDisplayMetrics();
    android.content.res.Configuration conf = res.getConfiguration();
    conf.setLocale(new Locale(language_code.toLowerCase())); // API 17+ only.
    // Use conf.locale = new Locale(...) if targeting lower versions
    res.updateConfiguration(conf, dm);
  }
}
</div>
<div class='x3'>Step 5: You can persisit the language choice for the app as below:</div>
<div class='code'>
public class BaseActivity extends AppCompatActivity {
    private Locale mCurrentLocale;
    @Override
    protected void onStart() {
        super.onStart();
        mCurrentLocale = getResources().getConfiguration().locale;
    }
    @Override
    protected void onRestart() {
        super.onRestart();
        Locale locale = getLocale(this);
        if (!locale.equals(mCurrentLocale)) {
            mCurrentLocale = locale;
            recreate();
        }
    }
    public static Locale getLocale(Context context){
        SharedPreferences sharedPreferences = PreferenceManager.getDefaultSharedPreferences(context);
        String lang = sharedPreferences.getString("language", "en");
        switch (lang) {
            case "English":
                lang = "en";
                break;
            case "Spanish":
                lang = "es";
                break;
        }
        return new Locale(lang);
    }
}
public class App extends Application {
    @Override
    public void onCreate() {
        super.onCreate();
        setLocale();
    }
    @Override
    public void onConfigurationChanged(Configuration newConfig) {
        super.onConfigurationChanged(newConfig);
        setLocale();
    }
    private void setLocale() {
        final Resources resources = getResources();
        final Configuration configuration = resources.getConfiguration();
        final Locale locale = getLocale(this);
        if (!configuration.locale.equals(locale)) {
            configuration.setLocale(locale);
            resources.updateConfiguration(configuration, null);
        }
    }
}
</div>
<div class='x2' id='hashid13'>Supporting seperate layout for differnt devices.</div>
<div class='x3'>Sometime it's required to have multiple layout of the UI for phone or tablet. We can easilty do that by spacifying mutple layout file. We can alos spacify multiple dimention files to spacidify differnet weidth of the buttons for phone and tablet.</div>
<div class='x3'>Step1: We can have two diffetnt layoyt for phone and 7 each tablet in res/layout/main_activity.xml    and res/layout-sw600dp/main_activity.xml(600dp or bigger).</div>
<div class='code'>
</div>
<table>
<caption>Table: Topical screen size:
</caption>
<tr><td>320dp</td><td>a typical phone screen (240x320 ldpi, 320x480 mdpi, 480x800 hdpi, etc). 4 inch phone</td></tr>
<tr><td>480dp</td><td>a large phone screen ~5" (480x800 mdpi). 5 inch phone</td></tr>
<tr><td>600dp</td><td>a small 7” tablet (600x1024 mdpi).</td></tr>
<tr><td>720dp</td><td>a 10” Larget tablet (720x1280 mdpi, 800x1280 mdpi, etc).</td></tr>
<tr><td>840dp</td><td>larget tablet</td></tr>
<tr><td>960dp</td><td>Very large tablet</td></tr>
<tr><td>1280dp</td><td>large</td></tr>
<tr><td>1440dp</td><td>large</td></tr>
<tr><td>1600dp</td><td>large</td></tr>
<tr><td>1920dp</td><td>Extra large</td></tr>
</table>
<table>
<caption>Table: Which file to store what?
</caption>
<tr><td>res/layout/main_activity.xml</td><td>For handsets (smaller than 600dp available width)</td></tr>
<tr><td>res/layout-w600dp/main_activity.xml</td><td>For 7” tablets or any screen with 600dp</td></tr>
<tr><td>res/layout/main_activity.xml</td><td>For handsets</td></tr>
<tr><td>res/layout-land/main_activity.xml</td><td>For handsets in landscape</td></tr>
<tr><td>res/layout-sw600dp/main_activity.xml</td><td>For 7” tablets</td></tr>
<tr><td>res/layout-sw600dp-land/main_activity.xml</td><td>For 7” tablets in landscape</td></tr>
<tr><td>res/layout/main_activity.xml</td><td>For handsets (smaller than 640dp x 480dp)</td></tr>
<tr><td>res/layout-large/main_activity.xml</td><td>For small tablets (640dp x 480dp and bigger)</td></tr>
<tr><td>res/layout-xlarge/main_activity.xml</td><td>For large tablets (960dp x 720dp and bigger)</td></tr>
</table>
<div class='x3'>You could also use layout alias. It can be defined all files inside layout, however, we can distrigushed the by having differnet values file.</div>
<div class='code'>
res/layout/main.xml            # single-pane layout
res/layout/main_twopanes.xml   # two-pane layout
And add these two files:
res/values-large/layout.xml:
&lt;resources&gt;
    &lt;item name="main" type="layout"&gt;@layout/main_twopanes&lt;/item&gt;
&lt;/resources&gt;
res/values-sw600dp/layout.xml:
&lt;resources&gt;
    &lt;item name="main" type="layout"&gt;@layout/main_twopanes&lt;/item&gt;
&lt;/resources&gt;
</div>
<div class='x2' id='hashid14'>Supporting different button width for diffent devices.</div>
<div class='x3'>You must understand the diff betwen dip and sp. Yhen you specify spacing between two views, use dp and When specifying text size, always use sp:</div>
<div class='code'>
&lt;Button android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/clickme"
    android:layout_marginTop="20dp" /&gt;
&lt;TextView android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:textSize="20sp" /&gt;
</div>
<div class='x3'>For example, You have a button view and You would like to have multiple dimention for this button for multiple devices. How to do that? Let's creates values folders and a dimens files in each folder. Based on your requirement you can give padding or any dimen values. As you  given, you should give same name for dimen in all the folders. Android will  automatically pick the dimen value based on your screen size.</div>
<div class='code'>
&lt;textView
  android:padding="@dimen/padding_1
  /&gt;
values/dimens.xml
&lt;dimen name="padding_1"&gt;5dp&lt;/dimen&gt;
values-sw360dp/dimens.xml
&lt;dimen name="padding_1"&gt;5dp&lt;/dimen&gt;
values-sw480dp/dimens.xml
&lt;dimen name="padding_1"&gt;8dp&lt;/dimen&gt;
values-sw600dp/dimens.xml
&lt;dimen name="padding_1"&gt;10dp&lt;/dimen&gt;
values-sw720dp/dminen.xml
&lt;dimen name="padding_1"&gt;13dp&lt;/dimen&gt;
</div>
<div class='x2' id='hashid15'>Supporting multiple images</div>
<div class='x3'>When you want to use image, you must provides the below variabtion:</div>
<div class='code'>
res/
  drawable-xxxhdpi/
    awesome-image.png
  drawable-xxhdpi/
    awesome-image.png
  drawable-xhdpi/
    awesome-image.png
  drawable-hdpi/
    awesome-image.png
  drawable-mdpi/
    awesome-image.png
</div>
<table>
<caption>Table: This table is showing image size of each
</caption>
<tr><td>36x36</td><td>(0.75x) for low-density (ldpi)</td></tr>
<tr><td>48x48</td><td>(1.0x baseline) for medium-density (mdpi)</td></tr>
<tr><td>72x72</td><td>(1.5x) for high-density (hdpi)</td></tr>
<tr><td>96x96</td><td>(2.0x) for extra-high-density (xhdpi)</td></tr>
<tr><td>144x144</td><td>(3.0x) for extra-extra-high-density (xxhdpi)</td></tr>
<tr><td>192x192</td><td>(4.0x) for extra-extra-extra-high-density (xxxhdpi)</td></tr>
</table>
<div class='x1' id='hashid16'>Android Networking</div>
<div class='x2' id='hashid17'>Connecting websocket</div>
<div class='x3'>WebSocket providing full-duplex communication channels over a single TCP connection. It is supported in HTML 5. Since the version 3.5 of the OkHttp library, you can also use WebSockets connection in your Android applications. Let's try to use it.</div>
<div class='code'>
Step1: Add Dependency
compile 'com.squareup.okhttp3:okhttp:3.6.0'
</div>
<div class='x3'>Step2:</div>
<div class='x3'>package in.co.dipankar.quickandorid.utils;</div>
<div class='code'>
package in.co.dipankar.quickandorid.utils;
import okhttp3.OkHttpClient;
import okhttp3.Request;
import okhttp3.Response;
import okhttp3.WebSocket;
import okhttp3.WebSocketListener;
import okio.ByteString;
public class WSUtils {
    private String mUrl;
    private OkHttpClient mClient;
    public interface Callback{
        public void onConnected();
        public void onDisconnected();
        public void onMessage(String message);
        public void onError();
    }
    private  WebSocket mWebSocket;
    private Callback mCallback;
    public  WSUtils(String url, Callback callback){
        mUrl = url;
        mCallback = callback;
        init();
    }
    private void init(){
        mClient = new OkHttpClient();
        Request request = new Request.Builder().url(mUrl).build();
        WebSocket ws = mClient.newWebSocket(request, new WebSocketListener() {
            @Override
            public void onOpen(WebSocket webSocket, Response response) {
                super.onOpen(webSocket, response);
                mCallback.onConnected();
                mWebSocket = webSocket;
            }
            @Override
            public void onMessage(WebSocket webSocket, String text) {
                super.onMessage(webSocket, text);
                mCallback.onMessage(text);
            }
            @Override
            public void onMessage(WebSocket webSocket, ByteString bytes) {
                super.onMessage(webSocket, bytes);
                mCallback.onMessage(bytes.toString());
            }
            @Override
            public void onClosing(WebSocket webSocket, int code, String reason) {
                super.onClosing(webSocket, code, reason);
                mWebSocket.close(1, null);
                mWebSocket = null;
            }
            @Override
            public void onClosed(WebSocket webSocket, int code, String reason) {
                super.onClosed(webSocket, code, reason);
                mCallback.onDisconnected();
            }
            @Override
            public void onFailure(WebSocket webSocket, Throwable t, Response response) {
                super.onFailure(webSocket, t, response);
                mCallback.onError();
            }
        });
    }
    public boolean sendMessage(String message){
        if(mWebSocket != null){
            mWebSocket.send(message);
            return true;
        } else {
            mCallback.onError();
            return false;
        }
    }
    public boolean connect(){
        return true;
    }
    public boolean disconnect(){
        if(mWebSocket != null){
            mClient.dispatcher().executorService().shutdown();
            return true;
        } else{
            return false;
        }
    }
}
</div>
<div class='x3'>Step 3: Here is how it can be used form your activity:</div>
<div class='code'>
private void testWebSocket() {
    WSUtils ws = new WSUtils("ws://echo.websocket.org", new WSUtils.Callback(){
        @Override
        public void onConnected() {
            DLog.e("WS onConnected");
        }
        @Override
        public void onDisconnected() {
            DLog.e("WS onDisconnected");
        }
        @Override
        public void onMessage(String message) {
            DLog.e("WS onMessage");
        }
        @Override
        public void onError() {
            DLog.e("WS onError");
        }
    });
    ws.sendMessage("Hello");
    ws.disconnect();
}
</div>
<div class='x2' id='hashid18'>Simple Network Calls to parse JSON.</div>
<div class='x3'>Similar to web socket, we can have our simple network Module to send web request as given as example.</div>
<div class='code'>
    compile 'com.squareup.okhttp3:okhttp:3.2.0'
</div>
<div class='x3'>Step2: Now you have some simple Utils class like this:</div>
<div class='code'>
package in.co.dipankar.quickandorid.utils;
import org.json.JSONObject;
import java.io.IOException;
import java.util.Map;
import okhttp3.Call;
import okhttp3.MediaType;
import okhttp3.OkHttpClient;
import okhttp3.Request;
import okhttp3.RequestBody;
import okhttp3.Response;
public class HTTPUtils {
    public interface  Callback{
        public void onBeforeSend();
        public void onSuccess(JSONObject obj);
        public void onError(String msg);
    }
    private  OkHttpClient mClient;
    public HTTPUtils(){
        mClient = new OkHttpClient();
    }
    public boolean get(String url, final Callback callback){
        Request request = new Request.Builder()
                .url(url)
                .get()
                .build();
        callback.onBeforeSend();
        mClient.newCall(request).enqueue( new okhttp3.Callback() {
            @Override
            public void onFailure(Call call, IOException e) {
                if(callback != null) {
                    callback.onError("Internal error:" + e.getMessage());
                }
            }
            @Override
            public void onResponse(Call call, Response response) throws IOException {
                if (callback != null) {
                    try {
                        String jsonData = response.body().string();
                        JSONObject Jobject = new JSONObject(jsonData);
                        callback.onSuccess(Jobject);
                    } catch (Exception e) {
                        e.printStackTrace();
                        callback.onError(
                                "Internal error happened while parsing the json object");
                    }
                }
            }
        });
        return true;
    }
    public boolean post(String url, Map&lt;String, String&gt; data, final  Callback callback){
        JSONObject json = new JSONObject();
        if(data!= null) {
            try {
                for (Map.Entry&lt;String, String&gt; entry : data.entrySet()) {
                    json.put(entry.getKey(), entry.getValue());
                }
            } catch (Exception e) {
                e.printStackTrace();
                return false;
            }
        }
        MediaType JSON = MediaType.parse("application/json; charset=utf-8");
        RequestBody body = RequestBody.create(JSON, json.toString());
        callback.onBeforeSend();
        Request request = new Request.Builder().url(url).post(body).build();
        mClient.newCall(request).enqueue(new okhttp3.Callback() {
            @Override
            public void onFailure(Call call, IOException e) {
                if (callback != null) {
                    callback.onError(e.toString());
                }
            }
            @Override
            public void onResponse(Call call, Response response) throws IOException {
                if (callback != null) {
                    try {
                        String jsonData = response.body().string();
                        JSONObject Jobject = new JSONObject(jsonData);
                        callback.onSuccess(Jobject);
                    } catch (Exception e) {
                        e.printStackTrace();
                        callback.onError("Internal error happened while parsing the json object");
                    }
                }
            }
        });
        return true;
    }
}
</div>
<div class='x3'>Step3: He is how you can call thease utils from your android Activity or from whatever you want:</div>
<div class='code'>
    private void testHTTPUtils() {
        HTTPUtils httpUtils = new HTTPUtils();
        httpUtils.get("http://simplestore.dipankar.co.in/api/test", new HTTPUtils.Callback() {
            @Override
            public void onBeforeSend() {
                DLog.e("HTTPUtils onBeforeSend");
            }
            @Override
            public void onSuccess(JSONObject obj)  {
                try {
                    DLog.e("HTTPUtils onSuccess"+obj.getString("status"));
                } catch (JSONException e) {
                    e.printStackTrace();
                }
            }
            @Override
            public void onError(String msg) {
                DLog.e("HTTPUtils onError");
            }
        });
        Map&lt;String, String&gt; data = new HashMap&lt;&gt;();
        data.put("name", "dipankar");
        httpUtils.post("http://simplestore.dipankar.co.in/api/test", data, new HTTPUtils.Callback() {
            @Override
            public void onBeforeSend() {
                DLog.e("HTTPUtils onBeforeSend");
            }
            @Override
            public void onSuccess(JSONObject obj)  {
                try {
                    DLog.e("HTTPUtils onSuccess"+obj.getString("status"));
                } catch (JSONException e) {
                    e.printStackTrace();
                }
            }
            @Override
            public void onError(String msg) {
                DLog.e("HTTPUtils onError");
            }
        });
    }
</div>
<div class='x3'>Synchronous Get</div>
<div class='code'>
    OkHttpClient client = new OkHttpClient();
Request request = new Request.Builder()
  .url("http://www.ssaurel.com/tmp/toto.txt")
  .build();
Response response = client.newCall(request).execute();
if (!response.isSuccessful()) {
  // manage error
  Log.e("Unexpected code " + response);
  return;
}
Headers responseHeaders = response.headers();
// show response headers
for (int i = 0; i &lt; responseHeaders.size(); i++) {
  Log.i(responseHeaders.name(i) + ": " + responseHeaders.value(i));
}
// show body content
Log.i(response.body().string());
</div>
<div class='x3'>Aync Get Request</div>
<div class='code'>
    OkHttpClient client = new OkHttpClient();
Request request = new Request.Builder()
  .url("http://www.ssaurel.com/tmp/toto.txt")
  .build();
client.newCall(request).enqueue(new Callback() {
  @Override public void onFailure(Call call, IOException e) {
    // manage failure !
  }
  @Override public void onResponse(Call call, Response response) throws IOException {
    if (!response.isSuccessful()) {
      // manage error
      Log.e("Unexpected code " + response);
      return;
    }
    Headers responseHeaders = response.headers();
    // show response headers
    for (int i = 0; i &lt; responseHeaders.size(); i++) {
      Log.i(responseHeaders.name(i) + ": " + responseHeaders.value(i));
    }
    // show body content
    Log.i(response.body().string());
  }
});
</div>
<div class='x3'>Accessing headers</div>
<div class='code'>
    private final OkHttpClient client = new OkHttpClient();
  public void run() throws Exception {
    Request request = new Request.Builder()
        .url("https://api.github.com/repos/square/okhttp/issues")
        .header("User-Agent", "OkHttp Headers.java")
        .addHeader("Accept", "application/json; q=0.5")
        .addHeader("Accept", "application/vnd.github.v3+json")
        .build();
    try (Response response = client.newCall(request).execute()) {
      if (!response.isSuccessful()) throw new IOException("Unexpected code " + response);
      System.out.println("Server: " + response.header("Server"));
      System.out.println("Date: " + response.header("Date"));
      System.out.println("Vary: " + response.headers("Vary"));
    }
  }
</div>
<div class='x3'>POST jSON Request</div>
<div class='code'>
public static final MediaType JSON
= MediaType.parse("application/json; charset=utf-8");
OkHttpClient client = new OkHttpClient();
String url = "http://www.ssaurel.com/tmp/jsonService";
String json = "{'mode' : 'test'}"; // Json Content ...
RequestBody body = RequestBody.create(JSON, json);
Request request = new Request.Builder()
  .url(url)
  .post(body)
  .build();
Response response = client.newCall(request).enqueue(new Callback() {
  @Override public void onFailure(Call call, IOException e) {
    // manage failure
  }
  @Override public void onResponse(Call call, Response response) throws IOException {
    // Manage response
    Log.i(response.body().string());
  }
});
</div>
<div class='x3'>Posting a file</div>
<div class='code'>
ublic static final MediaType MEDIA_TYPE_MARKDOWN
      = MediaType.parse("text/x-markdown; charset=utf-8");
  private final OkHttpClient client = new OkHttpClient();
  public void run() throws Exception {
    File file = new File("README.md");
    Request request = new Request.Builder()
        .url("https://api.github.com/markdown/raw")
        .post(RequestBody.create(MEDIA_TYPE_MARKDOWN, file))
        .build();
    try (Response response = client.newCall(request).execute()) {
      if (!response.isSuccessful()) throw new IOException("Unexpected code " + response);
      System.out.println(response.body().string());
    }
  }
</div>
<div class='x3'>Post Request with form params</div>
<div class='code'>
    private final OkHttpClient client = new OkHttpClient();
  public void run() throws Exception {
    RequestBody formBody = new FormBody.Builder()
        .add("search", "Jurassic Park")
        .build();
    Request request = new Request.Builder()
        .url("https://en.wikipedia.org/w/index.php")
        .post(formBody)
        .build();
    try (Response response = client.newCall(request).execute()) {
      if (!response.isSuccessful()) throw new IOException("Unexpected code " + response);
      System.out.println(response.body().string());
    }
  }
</div>
<div class='x3'>OKHTTP Cacheing</div>
<div class='code'>
    int cacheSize = 10 * 1024 * 1024; // 10MB
OkHttpClient.Builder builder = new OkHttpClient.Builder()
        .cache(new Cache(context.getCacheDir(), cacheSize)
        ....
new Request.Builder().cacheControl(CacheControl.FORCE_CACHE)
    ...;
</div>
<div class='x3'>Handing Timeouts for all calls</div>
<div class='code'>
    private final OkHttpClient client;
  public ConfigureTimeouts() throws Exception {
    client = new OkHttpClient.Builder()
        .connectTimeout(10, TimeUnit.SECONDS)
        .writeTimeout(10, TimeUnit.SECONDS)
        .readTimeout(30, TimeUnit.SECONDS)
        .build();
  }
  public void run() throws Exception {
    Request request = new Request.Builder()
        .url("http://httpbin.org/delay/2") // This URL is served with a 2 second delay.
        .build();
    try (Response response = client.newCall(request).execute()) {
      System.out.println("Response completed: " + response);
    }
  }
</div>
<div class='x3'>Handing Timeouts for each call</div>
<div class='code'>
    private final OkHttpClient client = new OkHttpClient();
  public void run() throws Exception {
    Request request = new Request.Builder()
        .url("http://httpbin.org/delay/1") // This URL is served with a 1 second delay.
        .build();
    // Copy to customize OkHttp for this request.
    OkHttpClient client1 = client.newBuilder()
        .readTimeout(500, TimeUnit.MILLISECONDS)
        .build();
    try (Response response = client1.newCall(request).execute()) {
      System.out.println("Response 1 succeeded: " + response);
    } catch (IOException e) {
      System.out.println("Response 1 failed: " + e);
    }
    // Copy to customize OkHttp for this request.
    OkHttpClient client2 = client.newBuilder()
        .readTimeout(3000, TimeUnit.MILLISECONDS)
        .build();
    try (Response response = client2.newCall(request).execute()) {
      System.out.println("Response 2 succeeded: " + response);
    } catch (IOException e) {
      System.out.println("Response 2 failed: " + e);
    }
  }
</div></div>
</div>
<div class="footer">
<p> Do you know this book/HTML is generated from a text file? I traied to use MS word and other software and its seems to be very hard to maintain, sync and reformat - So i get into this crazy idea - just have a text file and write into it. I have a python svript whcih just convert this text into html.</p>
<p> You are free to copy and share the content.  This book is free and always would be. If you have design question or find a bug in this book, please file a bug in github or mail me dutta.dipankar08@gmail.com</p>
<p> This site is add-free and planned to have add free till 2025. If you want to contribute, there are two easy way to do that - just send new content to me.</p>
<p> copyright @ 2018 . Dipankar Dutta </p>
<p> Made with Love from India <p>
</div>
</body>
</html>

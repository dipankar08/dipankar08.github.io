
<html>
<!--  this is an autogenerated file so any manuual chnages in this file will lost -->
<head>
    <title> Boook </title>
    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
<style>

    html {
        font-size: 100%;
        line-height: 1.6;
        font-family: 'Source Sans Pro', sans-serif;
    }
    body, a, body .top{ margin: 0 auto; color: #575757;background:white;}
    ol,ul{margin-bottom: 15px; margin-top:0;text-align: justify;}
    li{ margin-bottom: 5px;}

    div.code {
        white-space: pre;
        background: rgba(0, 0, 0, 0.1);
        color: black;
        padding: 5px;
        margin-bottom: 25px;
        font-size: 0.9rem;
        letter-spacing: .05px;
        font-family: monospace;
    }

    div.x1{ font-size: 3rem; text-align: center;margin-top: 50px;margin-bottom: 100px;}
    div.x2{ font-size: 1.5rem;margin-bottom: 25px;margin-top: 20px;}
    div.x3{ font-size: 1rem;margin-bottom: 10px;text-align: justify;}

    .top {
        position: fixed;
        height: 40px;
        border-bottom: 1px solid rgba(0,0,0,0.1);
        width: 100%;
        top: 0;
    }
    .middle { }
    .top .t { padding: 10px; margin-right:10px}
    .left {position:fixed;left: 0px;top: 50px;padding:5px;width: 300px;height: 100%; display:none;overflow: auto;border-right: 1px solid #575757;}
    .right{max-width: 800px; margin: 10px auto;padding:15px; margin-top:50px}

    a {display: block;font-family: 'Source Sans Pro', sans-serif; text-decoration: none; margin-bottom: 8px;}
    a.a1{font-weight:bold;font-size: 16px;}
    a.a2{margin-left:20px;}

    .footer{font-size: 11px;text-align: center;border-top: 1px solid #575757;}

    body.shown_menu .left {display:block}
    body.shown_menu .right {margin-left:320px;}

    body.dark,body.dark .top, body.dark a {background: #353535;color: #a7a0a0;}
    body.dark div.code {color: #0daf32;}

    /* Table Style */
    table {
        border-collapse: collapse;
        width:100%;
        margin-bottom: 50px;
    }
    table caption{
        background: rgba(0,0,0,0.75);
        color: white;
        font-weight: bold;
    }
    table th, table td, table caption{
        border: 1px solid rgba(0,0,0,0.1);
        padding: 10px;
    }
</style>
<script>
</script>
</head>
<body>
<div class="top">
     <span style='float:left'><b class="t" style="display: block;">Software Design Principles</b></span>
     <span style='float:right'>
        <i class="t fas fa-list-ul" onclick="$('body').toggleClass('shown_menu');"></i>
        <i class="t fas fa-lightbulb" onclick="$('body').toggleClass('dark');"></i>
    </span>
</div>
<div class="middle">
    <div class="left" style=""><a class='a1' href='#hashid1'+>Andorid components</a><a class='a2' href='#hashid2'+>Android Simple Activity</a><a class='a2' href='#hashid3'+>Activity Life Cycle Callback</a><a class='a2' href='#hashid4'+>Android Services Templates</a><a class='a2' href='#hashid5'+>Android Content Providers</a><a class='a2' href='#hashid6'+>Android Broadcast Receiver</a><a class='a1' href='#hashid7'+>Android UI Designs</a><a class='a2' href='#hashid8'+>Layouts</a><a class='a2' href='#hashid9'+>Controls</a><a class='a2' href='#hashid10'+>Navigations</a><a class='a2' href='#hashid11'+>Dialog and Navigation</a><a class='a2' href='#hashid12'+>Events and Guestures</a><a class='a2' href='#hashid13'+>Android fragments</a><a class='a2' href='#hashid14'+>Executing Async Jobs in android.</a><a class='a2' href='#hashid15'+>WebSocket Support to Android</a><a class='a1' href='#hashid16'+>Support personalize Experice.</a><a class='a2' href='#hashid17'+>Supporting mutiple languages</a><a class='a2' href='#hashid18'+>Supporting seperate layout for differnt devices.</a><a class='a2' href='#hashid19'+>Supporting different button width for diffent devices.</a><a class='a2' href='#hashid20'+>Supporting multiple images</a><a class='a1' href='#hashid21'+>Android Networking</a><a class='a2' href='#hashid22'+>Connecting websocket</a><a class='a2' href='#hashid23'+>Simple Network Calls to parse JSON.</a><a class='a2' href='#hashid24'+>Having HTTP server inside android App</a></div>
    <div class="right" style=""><div class='x1' id='hashid1'>Andorid components</div>
<div class='x3'>This tutorials is mainly design for providing templates for android devlopment and helping out my copy-paste efficiency.</div>
<div class='x2' id='hashid2'>Android Simple Activity</div>
<div class='x3'>Below I am providing a simple templates for having a easy Activity which just have a Click buttons Clicking of that button shows a Toast. extremely Simple.</div>
<div class='x3'>Step1: Here is the Manifest.</div>
<div class='code'>&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="in.co.dipankar.app"&gt;
    &lt;application
        android:allowBackup="true"
        android:icon="@mipmap/ic_launcher"
        android:label="@string/app_name"
        android:supportsRtl="true"
        android:theme="@style/AppTheme"&gt;
        &lt;activity android:name=".MainActivity"&gt;
            &lt;intent-filter&gt;
                &lt;action android:name="android.intent.action.MAIN" /&gt;
                &lt;category android:name="android.intent.category.LAUNCHER" /&gt;
            &lt;/intent-filter&gt;
        &lt;/activity&gt;
    &lt;/application&gt;
&lt;/manifest&gt;
</div>
<div class='x3'>Step 2: Here is the Layout</div>
<div class='code'>&lt;RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" &gt;
    &lt;Button
        android:id="@+id/MyButton"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerInParent="true"
        android:text="Button" /&gt;
&lt;/RelativeLayout&gt;
</div>
<div class='x3'>Step 3: Here is the code:</div>
<div class='code'>import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
public class MainActivity extends Activity {
	Button button;
	@Override
	public void onCreate(Bundle savedInstanceState) {
		super.onCreate(savedInstanceState);
		setContentView(R.layout.activity_main);
		button = (Button) findViewById(R.id.MyButton);
		button.setOnClickListener(new OnClickListener() {
			public void onClick(View arg0) {
        // DO Something.
			}
		});
	}
}
</div>
<div class='x2' id='hashid3'>Activity Life Cycle Callback</div>
<div class='x3'>In this section , we will discuss all the override functions of Activity and theoir purpose.</div>
<ul>
<li>We have all the lifecyclic callback.</li>
<li>How to support save and restore state</li>
<li>How to handle intent when app is already running.</li>
<li>How to ask Run time permission and how to handle that?</li>
</ul>
<div class='code'>import android.os.Bundle;
import android.app.Activity;
import android.util.Log;

public class MainActivity extends Activity {
   String msg = "Android : ";

   /** Called when the activity is first created. */
   @Override
   public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.activity_main);
      Log.d(msg, "The onCreate() event");
      // You might call this and call the code should be in onNewIntent
      // onNewIntent(getIntent());
   }

   /** Called when the activity is about to become visible. */
   @Override
   protected void onStart() {
      super.onStart();
      Log.d(msg, "The onStart() event");
   }

   /** Called when the activity has become visible. */
   @Override
   protected void onResume() {
      super.onResume();
      Log.d(msg, "The onResume() event");
   }

   /** Called when another activity is taking focus. */
   @Override
   protected void onPause() {
      super.onPause();
      Log.d(msg, "The onPause() event");
   }

   /** Called when the activity is no longer visible. */
   @Override
   protected void onStop() {
      super.onStop();
      Log.d(msg, "The onStop() event");
   }

   /** Called just before the activity is destroyed. */
   @Override
   public void onDestroy() {
      super.onDestroy();
      Log.d(msg, "The onDestroy() event");
   }

   // Save /STore State - https://inthecheesefactory.com/blog/fragment-state-saving-best-practices/en
   // These variable are destroyed along with Activity
   private int someVarA;
   private String someVarB;

   @Override
   protected void onSaveInstanceState(Bundle outState) {
       super.onSaveInstanceState(outState);
       outState.putInt("someVarA", someVarA);
       outState.putString("someVarB", someVarB);
       Log.d(msg, "The onSaveInstanceState() event");
   }

   @Override
   protected void onRestoreInstanceState(Bundle savedInstanceState) {
       super.onRestoreInstanceState(savedInstanceState);
       someVarA = savedInstanceState.getInt("someVarA");
       someVarB = savedInstanceState.getString("someVarB");
       Log.d(msg, "The onRestoreInstanceState() event");
   }

   // onNewIntent() is meant as entry point for singleTop activities which already run somewhere else in the stack and therefore can't call onCreate()
   @Override
    protected void onNewIntent(Intent intent) {
        super.onNewIntent(intent);
        // getIntent() should always return the most recent
        setIntent(intent);
    }

    // Run time Permission
    private void askPermission(){
      if (Build.VERSION.SDK_INT &gt; Build.VERSION_CODES.LOLLIPOP_MR1) {
          if (!checkIfAlreadyhavePermission()) {
              requestForSpecificPermission();
          } else{
            proceedAfterPermission();
          }
      } else{
        proceedAfterPermission();
      }
    }

    private boolean checkIfAlreadyhavePermission() {
        int result = ContextCompat.checkSelfPermission(this, Manifest.permission.GET_ACCOUNTS);
        if (result == PackageManager.PERMISSION_GRANTED) {
            return true;
        } else {
            return false;
        }
    }

    private void requestForSpecificPermission() {
        ActivityCompat.requestPermissions(this, new String[]{Manifest.permission.GET_ACCOUNTS, Manifest.permission.RECEIVE_SMS, Manifest.permission.READ_SMS, Manifest.permission.READ_EXTERNAL_STORAGE, Manifest.permission.WRITE_EXTERNAL_STORAGE}, 101);
    }

    @Override
    public void onRequestPermissionsResult(int requestCode, String[] permissions, int[] grantResults) {
        switch (requestCode) {
            case 101:
                if (grantResults[0] == PackageManager.PERMISSION_GRANTED) {
                    //granted
                } else {
                    //not granted
                }
                break;
            default:
                super.onRequestPermissionsResult(requestCode, permissions, grantResults);
        }
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);
        if (requestCode == REQUEST_PERMISSION_SETTING) {
            if (ActivityCompat.checkSelfPermission(MultiplePermissionsActivity.this, permissionsRequired[0]) == PackageManager.PERMISSION_GRANTED) {
                //Got Permission
                proceedAfterPermission();
            }
        }
    }

    private void proceedAfterPermission() {
        txtPermissions.setText("We've got all permissions");
        Toast.makeText(getBaseContext(), "We got All Permissions", Toast.LENGTH_LONG).show();
    }

    @Override
    protected void onPostResume() {
        super.onPostResume();
        if (sentToSettings) {
            if (ActivityCompat.checkSelfPermission(MultiplePermissionsActivity.this, permissionsRequired[0]) == PackageManager.PERMISSION_GRANTED) {
                //Got Permission
                proceedAfterPermission();
            }
        }
    }

}
</div>
<div class='x3'>You need to add permission String in the menifest.</div>
<div class='code'>&lt;uses-permission android:name="android.permission.CAMERA" /&gt;
&lt;uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" /&gt;
&lt;uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" /&gt;
</div>
<div class='x2' id='hashid4'>Android Services Templates</div>
<div class='x3'>A Service is an Android application component without a UI that runs on the main thread (of the hosting process). It also has to be declared in the AndroidManifest.xml</div>
<ol>
<li>A Started Service can be started by calling the startService(Intent)method in your Activity or Service. This Intent has to be an explicit Intent, which means that you either make a reference to the Service’s class</li>
</ol>
<div class='x3'>2.</div>
<div class='x3'>A Service can be started multiple times and each time  onStartCommand() is called, we can pass extra while stated which is received by this callback. Even if you start a Service multiple times, it will only call onCreate() only once. To stop a service by calling stopSelf() from it. If you stop from outside, you must call as stopService.When the Service does stop then it will call onDestroy().</div>
<div class='x3'>Service might be crashed or killed. In that case Service might be restarted base don the flag as it returned by onStartCommand.</div>
<ol>
<li>Service.START_STICKY - Service is restarted if it gets terminated. Intent data passed to the onStartCommand method is null. Used for services which manages their own state and do not depend on the Intent data.</li>
<li>Service.START_NOT_STICKY - Service is not restarted. this is used for services which are periodically triggered anyway. The service is only restarted if the runtime has pending startService() calls since the service termination.</li>
<li>Service.START_REDELIVER_INTENT - Similar to Service.START_STICKY but the original Intent is re-delivered to the onStartCommand method.</li>
</ol>
<div class='x3'>We can have comminucation between service and Activity. The service receives the intent data from the starting Android component and performs its work. So the communication from Activity to service is statght forword. However, We need to use Receive for communicating service to activity. In this case your activity can register a broadcast receiver for an event and the service sends outs corresponding events. Android provides the LocalBroadcastManager class in the support library v4. This is a helper class to register for and send broadcasts of Intents to local objects within your process.</div>
<div class='x3'>A sample service is giving as below:</div>
<ol>
<li>First Create a Service Calss.</li>
</ol>
<div class='code'>import android.app.Service;
import android.os.IBinder;
import android.content.Intent;
import android.os.Bundle;
import android.widget.Toast;
public class HelloService extends Service {
   /** indicates how to behave if the service is killed */
   int mStartMode;

   /** interface for clients that bind */
   IBinder mBinder;

   /** indicates whether onRebind should be used */
   boolean mAllowRebind;

   /** Called when the service is being created. */
   @Override
   public void onCreate() {

   }

   /** The service is starting, due to a call to startService() */
   @Override
   public int onStartCommand(Intent intent, int flags, int startId) {
      //process intent
      Toast.makeText(this, "Service Started", Toast.LENGTH_LONG).show();
      return START_STICKY;
   }

   /** A client is binding to the service with bindService() */
   @Override
   public IBinder onBind(Intent intent) {
      return mBinder;
   }

   /** Called when all clients have unbound with unbindService() */
   @Override
   public boolean onUnbind(Intent intent) {
      return mAllowRebind;
   }

   /** Called when a client is binding to the service with bindService()*/
   @Override
   public void onRebind(Intent intent) {
   }

   /** Called when The service is no longer used and is being destroyed */
   @Override
   public void onDestroy() {
   super.onDestroy();
   Toast.makeText(this, "Service Destroyed", Toast.LENGTH_LONG).show();
   }
}
</div>
<div class='x3'>Step 2: Activity can start or stop Service as below:</div>
<div class='code'>import android.content.Intent;
import android.support.v7.app.AppCompatActivity;
import android.os.Bundle;

import android.os.Bundle;
import android.app.Activity;
import android.util.Log;
import android.view.View;

public class MainActivity extends Activity {
   String msg = "Android : ";

   /** Called when the activity is first created. */
   @Override
   public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.activity_main);
      Log.d(msg, "The onCreate() event");
   }

   public void startService(View view) {
      startService(new Intent(getBaseContext(), MyService.class));
   }

   // Method to stop the service
   public void stopService(View view) {
      stopService(new Intent(getBaseContext(), MyService.class));
   }
}
</div>
<div class='x3'>Step 3: Dont forget to put thease into menufest.</div>
<div class='code'>&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;manifest xmlns:android="http://schemas.android.com/apk/res/android"
   package="com.example.tutorialspoint7.myapplication"&gt;
   &lt;application
      android:allowBackup="true"
      android:icon="@mipmap/ic_launcher"
      android:label="@string/app_name"
      android:supportsRtl="true"
      android:theme="@style/AppTheme"&gt;
      &lt;activity android:name=".MainActivity"&gt;
         &lt;intent-filter&gt;
            &lt;action android:name="android.intent.action.MAIN" /&gt;
            &lt;category android:name="android.intent.category.LAUNCHER" /&gt;
         &lt;/intent-filter&gt;
      &lt;/activity&gt;
      &lt;service android:name=".MyService" /&gt;
   &lt;/application&gt;
&lt;/manifest&gt;
</div>
<div class='x3'>We have another kind of service call intent servivce: The Service can be used in tasks with no UI, but shouldn't be too long. If you need to perform long tasks, you must use threads within Service. The IntentService can be used in long tasks usually with no communication to Main Thread. If communication is required, can use Main Thread handler or broadcast intents. Another case of use is when callbacks are needed.</div>
<div class='x3'>Below example shows an Intent Service and a comminucation from service to Activity.</div>
<div class='x3'>Step1: Let;s have the service here.</div>
<div class='code'>import android.app.IntentService;
import android.content.Intent;
public class CashbackIntentService extends IntentService{
    final static String CASHBACK_INFO = "cashback_info";
    public CashbackIntentService() {
        super("Cashback IntentService");
    }

    @Override
    protected void onHandleIntent(Intent intent) {
        String cb_category = intent.getStringExtra("cashback_cat");
        String cbinfo = getCashbackInfo(cb_category);
        sendCashbackInfoToClient(cbinfo);
    }
    private String getCashbackInfo(String cbcat){
        String cashback;
        if("electronics".equals(cbcat)){
            cashback = "Upto 20% cashback on electronics";
        }else if("fashion".equals(cbcat)){
            cashback = "Upto 60% cashbak on all fashion items";
        }else{
            cashback = "All other categories except fashion and electronics, flat 30% cashback";
        }
        return cashback;
    }
    // This runs on a worker thread.
    private void sendCashbackInfoToClient(String msg){
        Intent intent = new Intent();
        intent.setAction(CASHBACK_INFO);
        intent.putExtra("cashback",msg);
        sendBroadcast(intent);
        // LocalBroadcastManager.getInstance(this).sendBroadcast(intent);
    }
}
</div>
<div class='x3'>Step2: Let;s have the activity and Have a Broadcast Receiver.</div>
<div class='code'>import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.os.Bundle;
import android.support.v7.app.AppCompatActivity;
import android.view.View;
import android.widget.EditText;
import android.widget.TextView;

public class IntentServiceActivity extends AppCompatActivity {
    private CashbackReciver cashbackReciver;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_intentservice);
        registerCashbackReceiver();
        startCashbackService();
    }
    @Override
    protected void onStop() {
        super.onStop();
        unregisterReceiver(cashbackReciver);
    }

    public void startCashbackService(View view){
        Intent cbIntent =  new Intent();
        cbIntent.setClass(this, CashbackIntentService.class);
        cbIntent.putExtra("cashback_cat", "SomeText");
        startService(cbIntent);
    }

    private void registerCashbackReceiver(){
        cashbackReciver = new CashbackReciver();
        IntentFilter intentFilter = new IntentFilter();
        intentFilter.addAction(CashbackIntentService.CASHBACK_INFO);
        registerReceiver(cashbackReciver, intentFilter);
    }
    private class CashbackReciver extends BroadcastReceiver {
        @Override
        public void onReceive(Context context, Intent intent) {
            String cbinfo = intent.getStringExtra("cashback");
        }
    }
}
</div>
<div class='x2' id='hashid5'>Android Content Providers</div>
<div class='x2' id='hashid6'>Android Broadcast Receiver</div>
<div class='x1' id='hashid7'>Android UI Designs</div>
<div class='x3'>In this section, I am mainly concentret on android UI Design. In andorid, we can build UI either using XML files or Programitically. We need Layouts and Controls to have a Layout. Layouts are the holders of the Controls and Controls are the actual Objects like button or TextView etc.</div>
<div class='x2' id='hashid8'>Layouts</div>
<table>
<caption>Table: List of All Layoit supported by Android
</caption>
<tr><td>LinearLayout</td><td>Android LinearLayout is a view group that aligns all children in either vertically or horizontally. Some important properties is: android:baselineAligned, android:divider="000", android:gravity="center", android:orientation="vertical", android:weightSum=3</td></tr>
<tr><td>Relative Layout</td><td>RelativeLayout is a view group that displays child views in relative positions.</td></tr>
<tr><td>Table Layout</td><td>TableLayout is a view that groups views into rows and columns.</td></tr>
<tr><td>AbsoluteLayout</td><td>enables you to specify the exact location of its children.</td></tr>
<tr><td>Frame Layout</td><td>The FrameLayout is a placeholder on screen that you can use to display a single view.</td></tr>
<tr><td>List View</td><td>ListView is a view group that displays a list of scrollable items.</td></tr>
<tr><td>Grid View</td><td>GridView is a ViewGroup that displays items in a two-dimensional, scrollable grid.</td></tr>
<tr><td>Recyler View</td><td>Smart Views</td></tr>
<tr><td>CustomExtendViews</td><td>This is an extension on aelement View</td></tr>
<tr><td>CustomCopositeView</td><td>This loads and layout and Reperesnt a simpel view.</td></tr>
<tr><td>CustomDrawView</td><td>Here we build a view by drawing in canvus</td></tr>
</table>
<div class='x2' id='hashid9'>Controls</div>
<table>
<caption>Table: List of all controls/ Widgetsin Android
</caption>
<tr><td>TextView</td><td>This control is used to display text to the user.</td></tr>
<tr><td>EditText</td><td>EditText is a predefined subclass of TextView that includes rich editing capabilities.</td></tr>
<tr><td>AutoCompleteTextView</td><td>The AutoCompleteTextView is a view that is similar to EditText, except that it shows a list of completion suggestions automatically while the user is typing.</td></tr>
<tr><td>Button</td><td>A push-button that can be pressed, or clicked, by the user to perform an action.</td></tr>
<tr><td>ImageButton</td><td>An ImageButton is an AbsoluteLayout which enables you to specify the exact location of its children. This shows a button with an image (instead of text) that can be pressed or clicked by the user.</td></tr>
<tr><td>CheckBox</td><td>An on/off switch that can be toggled by the user. You should use check box when presenting users with a group of selectable options that are not mutually exclusive.</td></tr>
<tr><td>ToggleButton</td><td>An on/off button with a light indicator.</td></tr>
<tr><td>RadioButton</td><td>The RadioButton has two states: either checked or unchecked.</td></tr>
<tr><td>RadioGroup</td><td>A RadioGroup is used to group together one or more RadioButtons.</td></tr>
<tr><td>ProgressBar</td><td>The ProgressBar view provides visual feedback about some ongoing tasks, such as when you are performing a task in the background.</td></tr>
<tr><td>Spinner</td><td>A drop-down list that allows users to select one value from a set.</td></tr>
<tr><td>TimePicker</td><td>The TimePicker view enables users to select a time of the day, in either 24-hour mode or AM/PM mode.</td></tr>
<tr><td>DatePicker</td><td>The DatePicker view enables users to select a date of the day.</td></tr>
</table>
<div class='x2' id='hashid10'>Navigations</div>
<table>
<caption>Table: List of Navigation Patterns in Andrroid
</caption>
<tr><td>ViewPager #</td></tr>
<tr><td>Navigation #</td></tr>
<tr><td>Menu #</td></tr>
</table>
<div class='x2' id='hashid11'>Dialog and Navigation</div>
<table>
<caption>Table: Dialog and Notifications
</caption>
<tr><td>AlertDiloags</td><td>A Dialog is small window that prompts the user to a decision or enter additional information. You might show some info and Ok button or Ask some confirmation ( OK/Cancel) or Misght show a list or might ask for selecet item from a list.</td></tr>
<tr><td>DialogFragment</td><td>Dialog hosted inside a fragemnet</td></tr>
<tr><td>ProgressDialog</td><td>Progress bars are used to show progress of a task</td></tr>
<tr><td>DatePickerDialog</td><td>Used for showing the date Picker dialog and selecet dates.</td></tr>
<tr><td>Notification</td><td>A notification is a message you can display to the user outside of your application's normal UI.</td></tr>
</table>
<div class='x2' id='hashid12'>Events and Guestures</div>
<table>
<caption>Table: List of all Evenet Guesture
</caption>
<tr><td>onClick</td><td>Handling click events</td></tr>
<tr><td>onLongClick</td><td>Hanldong the log tap events</td></tr>
<tr><td>addTextChangedListener</td><td>Called when you chnages the text in EditText</td></tr>
<tr><td>onFocusChange</td><td>This is called when the widget looses its focus ie. user goes away from the view item.</td></tr>
<tr><td>onKey</td><td>This is called when the user is focused on the item and presses or releases a hardware key on the device.</td></tr>
<tr><td>onTouch</td><td>This is called when the user presses the key, releases the key, or any movement gesture on the screen.</td></tr>
<tr><td>onMenuItemClick</td><td>This is called when the user selects a menu item. You will use onMenuItemClick() event handler to handle such event.</td></tr>
<tr><td>onCreateContextMenu</td><td>This is called when the context menu is being built(as the result of a sustained "long click)</td></tr>
<tr><td>GestureDetector.SimpleOnGestureListener</td><td>Detect Android provides special types of touch screen events such as pinch , double tap, scrolls , long presses and flinch. These are all known as gestures.</td></tr>
<tr><td>ScaleGestureDetector</td><td>Delect the scale events.</td></tr>
</table>
<div class='x3'>Example: Listen text xhnage of Edit Text</div>
<div class='code'>EditText value = (EditText) view.findViewById(R.id.value);
value.addTextChangedListener(new TextWatcher()
{
    @Override
    public void beforeTextChanged(CharSequence s, int start, int count, int after)
    {

    }

    @Override
    public void onTextChanged(CharSequence s, int start, int before, int count)
    {

    }

    @Override
    public void afterTextChanged(Editable s)
    {
        HashMap&lt;String, String&gt; edit = new HashMap&lt;&gt;();

        edit.put("string", s.toString());

        openEntry.edit_list.add(edit);
    }
});
</div>
<div class='x3'>Example: Have a Simple Guesture detcetor</div>
<div class='code'>GestureDetector myG;
myG = new GestureDetector(this,new Gesture());
   
class Gesture extends GestureDetector.SimpleOnGestureListener{
   public boolean onSingleTapUp(MotionEvent ev) {
   }
   
   public void onLongPress(MotionEvent ev) {
   }
   
   public boolean onScroll(MotionEvent e1, MotionEvent e2, float distanceX,
   float distanceY) {
   }
   
   public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX,
   float velocityY) {
   }
}

// Here is your activity.

import android.app.Activity;
import android.graphics.Matrix;
import android.os.Bundle;

import android.view.MotionEvent;
import android.view.ScaleGestureDetector;
import android.widget.ImageView;

public class MainActivity extends Activity {
   private ImageView iv;
   private Matrix matrix = new Matrix();
   private float scale = 1f;
   private ScaleGestureDetector SGD;

   @Override
   protected void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.activity_main);

      iv=(ImageView)findViewById(R.id.imageView);
      SGD = new ScaleGestureDetector(this,new ScaleListener());
   }

   public boolean onTouchEvent(MotionEvent ev) {
      SGD.onTouchEvent(ev);
      return true;
   }

   private class ScaleListener extends ScaleGestureDetector.
      SimpleOnScaleGestureListener {
      
      @Override
      public boolean onScale(ScaleGestureDetector detector) {
         scale *= detector.getScaleFactor();
         scale = Math.max(0.1f, Math.min(scale, 5.0f));
         matrix.setScale(scale, scale);
         iv.setImageMatrix(matrix);
         return true;
      }
   }
}

</div>
<div class='x3'>Example: Click and Long Click</div>
<div class='code'>import android.app.ProgressDialog;
import android.os.Bundle;
import android.support.v7.app.ActionBarActivity;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;

public class MainActivity extends ActionBarActivity {
   private ProgressDialog progress;
   Button b1,b2;

   @Override
   protected void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.activity_main);
      progress = new ProgressDialog(this);

      b1=(Button)findViewById(R.id.button);
      b2=(Button)findViewById(R.id.button2);
      b1.setOnClickListener(new View.OnClickListener() {
         
         @Override
         public void onClick(View v) {
            TextView txtView = (TextView) findViewById(R.id.textView);
            txtView.setTextSize(25);
         }
      });

      b2.setOnClickListener(new View.OnClickListener() {
         
         @Override
         public void onClick(View v) {
            TextView txtView = (TextView) findViewById(R.id.textView);
            txtView.setTextSize(55);
         }
      });
   }
}
</div>
<div class='x3'>Example: Some Touch Evnets</div>
<div class='code'>import android.app.Activity;
import android.os.Bundle;
import android.view.MotionEvent;
import android.view.View;
import android.widget.EditText;
import android.widget.TextView;

public class MainActivity extends Activity {
   float xAxis = 0f;
   float yAxis = 0f;

   float lastXAxis = 0f;
   float lastYAxis = 0f;

   EditText ed1, ed2, ed3, ed4;
   TextView tv1;

   @Override
   protected void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.activity_main);

      ed1 = (EditText) findViewById(R.id.editText);
      ed2 = (EditText) findViewById(R.id.editText2);
      ed3 = (EditText) findViewById(R.id.editText3);
      ed4 = (EditText) findViewById(R.id.editText4);

      tv1=(TextView)findViewById(R.id.textView2);
		
      tv1.setOnTouchListener(new View.OnTouchListener() {
         @Override
         public boolean onTouch(View v, MotionEvent event) {
            final int actionPeformed = event.getAction();

            switch(actionPeformed){
               case MotionEvent.ACTION_DOWN:{
                  final float x = event.getX();
                  final float y = event.getY();

                  lastXAxis = x;
                  lastYAxis = y;

                  ed1.setText(Float.toString(lastXAxis));
                  ed2.setText(Float.toString(lastYAxis));
                  break;
               }

               case MotionEvent.ACTION_MOVE:{
                  final float x = event.getX();
                  final float y = event.getY();

                  final float dx = x - lastXAxis;
                  final float dy = y - lastYAxis;

                  xAxis += dx;
                  yAxis += dy;

                  ed3.setText(Float.toString(xAxis));
                  ed4.setText(Float.toString(yAxis));
                  break;
               }
            }
            return true;
         }
      });
   }
}
</div>
<div class='x3'>Example: Here is the simple Notification example</div>
<div class='code'>public class MainActivity extends Activity {
   Button b1;
   @Override
   protected void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.activity_main);

      b1 = (Button)findViewById(R.id.button);
      b1.setOnClickListener(new View.OnClickListener() {
         @Override
         public void onClick(View v) {
            addNotification();
         }
      });
   }

   private void addNotification() {
      NotificationCompat.Builder builder =
         new NotificationCompat.Builder(this)
         .setSmallIcon(R.drawable.abc)
         .setContentTitle("Notifications Example")
         .setContentText("This is a test notification");

      Intent notificationIntent = new Intent(this, MainActivity.class);
      PendingIntent contentIntent = PendingIntent.getActivity(this, 0, notificationIntent,
         PendingIntent.FLAG_UPDATE_CURRENT);
      builder.setContentIntent(contentIntent);

      // Add as notification
      NotificationManager manager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);
      manager.notify(0, builder.build());
   }
}
</div>
<div class='x3'>Example: Here I will sow you of all Kind of alrt dialog</div>
<div class='code'>// Simple AlertDiloags
AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(this);
alertDialogBuilder.setPositiveButton(CharSequence text, DialogInterface.OnClickListener listener)
alertDialogBuilder.setNegativeButton(CharSequence text, DialogInterface.OnClickListener listener)
AlertDialog alertDialog = alertDialogBuilder.create();
alertDialog.show();

// Using Dialog Fragments
public class DialogFragment extends DialogFragment {
   @Override
   public Dialog onCreateDialog(Bundle savedInstanceState) {
      // Use the Builder class for convenient dialog construction
      AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
      builder.setPositiveButton(R.string.fire, new DialogInterface.OnClickListener() {
         public void onClick(DialogInterface dialog, int id) {
            toast.makeText(this,"enter a text here",Toast.LENTH_SHORT).show();
         }
      })
      .setNegativeButton(R.string.cancel, new DialogInterface.OnClickListener() {
         public void onClick(DialogInterface dialog, int id) {
            finish();
         });
         // Create the AlertDialog object and return it
         return builder.create();
      }
   }
}

// Show List in the Dilaog
public Dialog onCreateDialog(Bundle savedInstanceState) {
   AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
   builder.setTitle(Pick a Color)
   
   .setItems(R.array.colors_array, new DialogInterface.OnClickListener() {
      public void onClick(DialogInterface dialog, int which) {
         // The 'which' argument contains the index position
         // of the selected item
      }
   });
   return builder.create();
}

// Single-choice list dialog
public Dialog onCreateDialog(Bundle savedInstanceState) {
   mSelectedItems = new ArrayList();
   AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
   
   builder.setTitle("This is list choice dialog box");
   .setMultiChoiceItems(R.array.toppings, null,
      new DialogInterface.OnMultiChoiceClickListener() {
      @Override
      public void onClick(DialogInterface dialog, int which, boolean isChecked) {
         if (isChecked) {
            // If the user checked the item, add it to the selected items
            mSelectedItems.add(which);
         }
         
         else if (mSelectedItems.contains(which)) {
            // Else, if the item is already in the array, remove it 
            mSelectedItems.remove(Integer.valueOf(which));
         }
      }
   })
   
   // Set the action buttons
   .setPositiveButton(R.string.ok, new DialogInterface.OnClickListener() {
      @Override
      public void onClick(DialogInterface dialog, int id) {
         // User clicked OK, so save the mSelectedItems results somewhere
         // or return them to the component that opened the dialog
         ...
      }
   })
   
   .setNegativeButton(R.string.cancel, new DialogInterface.OnClickListener() {
      @Override
      public void onClick(DialogInterface dialog, int id) {
         ...
      }
   });
   return builder.create();
}
</div>
<div class='x3'>Example: Let's have an example of all dialog.</div>
<div class='code'>import android.app.ProgressDialog;
import android.support.v7.app.ActionBarActivity;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;

public class MainActivity extends ActionBarActivity {
   Button b1;
   private ProgressDialog progress;
   
   protected void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.activity_main);
      b1 = (Button) findViewById(R.id.button2);
   }
   
   public void testProgressDilog(View view){
      progress=new ProgressDialog(this);
      progress.setMessage("Downloading Music");
      progress.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
      progress.setIndeterminate(true);
      progress.setProgress(0);
      progress.show();
      
      final int totalProgressTime = 100;
      final Thread t = new Thread() {
         @Override
         public void run() {
            int jumpTime = 0;
            
            while(jumpTime &lt; totalProgressTime) {
               try {
                  sleep(200);
                  jumpTime += 5;
                  progress.setProgress(jumpTime);
               } catch (InterruptedException e) {
                  // TODO Auto-generated catch block
                  e.printStackTrace();
               }
            }
         }
      };
      t.start();
   }
   // test Date DatePicker
    calendar = Calendar.getInstance();
    year = calendar.get(Calendar.YEAR);
    month = calendar.get(Calendar.MONTH);
    day = calendar.get(Calendar.DAY_OF_MONTH);
    showDate(year, month+1, day);
      
    private DatePickerDialog.OnDateSetListener myDateListener = new 
      DatePickerDialog.OnDateSetListener() {
      @Override
      public void onDateSet(DatePicker arg0, 
         int arg1, int arg2, int arg3) {
         // TODO Auto-generated method stub
         // arg1 = year
         // arg2 = month
         // arg3 = day
         showDate(arg1, arg2+1, arg3);
      }
   };
</div>
<div class='x3'>Example: Sample Linier layouts</div>
<div class='code'>import android.os.Bundle;
import android.app.Activity;

public class MainActivity extends Activity {
   @Override
   protected void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.activity_main);
   }
}
&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:layout_width="fill_parent"
   android:layout_height="fill_parent"
   android:orientation="vertical" &gt;
   &lt;Button android:id="@+id/btnStartService"
      android:layout_width="270dp"
      android:layout_height="wrap_content"
      android:text="start_service"/&gt;
   &lt;Button android:id="@+id/btnPauseService"
      android:layout_width="270dp"
      android:layout_height="wrap_content"
      android:text="pause_service"/&gt;
      
   &lt;Button android:id="@+id/btnStopService"
      android:layout_width="270dp"
      android:layout_height="wrap_content"
      android:text="stop_service"/&gt;
&lt;/LinearLayout&gt;
</div>
<div class='x3'>Example: Let's see an example of all Mostly usefule control :</div>
<div class='code'>&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:layout_width="fill_parent"
   android:layout_height="fill_parent"
   android:orientation="vertical" &gt;
   
   &lt;TextView android:id="@+id/text"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:text="I am a TextView" /&gt;
   
   &lt;Button android:id="@+id/button"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:text="I am a Button" /&gt;
    
    &lt;EditText
      android:id="@+id/edittext"
      android:layout_width="fill_parent"
      android:layout_height="wrap_content"
      android:layout_alignLeft="@+id/button"
      android:layout_below="@+id/textView1"
      android:layout_marginTop="61dp"
      android:ems="10"
      android:text="@string/enter_text" android:inputType="text" /&gt;

    &lt;AutoCompleteTextView
      android:id="@+id/autoCompleteTextView1"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:layout_alignLeft="@+id/textView2"
      android:layout_below="@+id/textView2"
      android:layout_marginTop="54dp"
      android:ems="10" /&gt;
   &lt;ImageButton
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:id="@+id/imageButton"
      android:layout_centerVertical="true"
      android:layout_centerHorizontal="true"
      android:src="@drawable/abc"/&gt;
    &lt;CheckBox
      android:id="@+id/checkBox1"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:text="Do you like Tutorials Point"
      android:layout_above="@+id/button"
      android:layout_centerHorizontal="true" /&gt;
   &lt;ToggleButton
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:text="On"
      android:id="@+id/toggleButton"
      android:checked="true"
      android:layout_below="@+id/imageButton"
      android:layout_toEndOf="@+id/button2/&gt;
    &lt;RadioGroup
      android:layout_width="fill_parent"
      android:layout_height="90dp"
      android:layout_below="@+id/imageView"
      android:layout_marginTop="58dp"
      android:weightSum="1"
      android:id="@+id/radioGroup"
      android:layout_alignLeft="@+id/textView2"
      android:layout_alignStart="@+id/textView2"
      android:layout_alignRight="@+id/textView3"
      android:layout_alignEnd="@+id/textView3"&gt;
      &lt;RadioButton
         android:layout_width="wrap_content"
         android:layout_height="55dp"
         android:text="Male"
         android:id="@+id/radioButton"
         android:layout_gravity="center_horizontal"
         android:checked="false"
         android:textSize="25dp" /&gt;
      &lt;RadioButton
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:text="Female"
         android:id="@+id/radioButton2"
         android:layout_gravity="center_horizontal"
         android:checked="false"
         android:textSize="25dp"
         android:layout_weight="0.13" /&gt;
   &lt;/RadioGroup&gt;
    &lt;Spinner
      android:id="@+id/spinner"
      android:layout_width="fill_parent"
      android:layout_height="wrap_content"
      android:prompt="@string/spinner_title"/&gt;
    &lt;TimePicker
   android:id="@+id/timePicker1"
   android:layout_width="wrap_content"
   android:layout_height="wrap_content" /&gt;
&lt;/LinearLayout&gt;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.widget.ArrayAdapter;
import android.widget.AutoCompleteTextView;

public class MainActivity extends Activity {
   AutoCompleteTextView autocomplete;
   
   String[] arr = { "Paries,France", "PA,United States","Parana,Brazil", 
      "Padua,Italy", "Pasadena,CA,United States"};
   
   @Override
   protected void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.activity_main);

      // Autocomplte
      autocomplete = (AutoCompleteTextView)             
      findViewById(R.id.autoCompleteTextView1);
      ArrayAdapter&lt;String&gt; adapter = new ArrayAdapter&lt;String&gt;  
      (this,android.R.layout.select_dialog_item, arr);
      autocomplete.setThreshold(2);
      autocomplete.setAdapter(adapter);

      button.setOnClickListener(new View.OnClickListener() {
         @Override
         public void onClick(View v) {
            StringBuffer result = new StringBuffer();
            result.append("Thanks : ").append(ch1.isChecked());
            result.append("\nThanks: ").append(ch2.isChecked());
            Toast.makeText(MainActivity.this, result.toString(), 
               Toast.LENGTH_LONG).show();
         }
      });
   }

   void testSpinner(){
      Spinner spinner = (Spinner) findViewById(R.id.spinner);
      spinner.setOnItemSelectedListener(new onItemSelected(AdapterView&lt;?&gt; parent, View view, int position, long id) {
        String item = parent.getItemAtPosition(position).toString();
        Toast.makeText(parent.getContext(), "Selected: " + item, Toast.LENGTH_LONG).show();
    });
      
      // Spinner Drop down elements
      List&lt;String&gt; categories = new ArrayList&lt;String&gt;();
      categories.add("Automobile");
      categories.add("Business Services");
      categories.add("Computers");
      categories.add("Education");
      categories.add("Personal");
      categories.add("Travel");

      ArrayAdapter&lt;String&gt; dataAdapter = new ArrayAdapter&lt;String&gt;(this, android.R.layout.simple_spinner_item, categories);
      dataAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
      spinner.setAdapter(dataAdapter);
   }
    // Timer
    import android.widget.TimePicker;
    private TimePicker timePicker1;
    timePicker1 = (TimePicker) findViewById(R.id.timePicker1);
    int hour = timePicker1.getCurrentHour();
    int min = timePicker1.getCurrentMinute();
}
</div>
<div class='x2' id='hashid13'>Android fragments</div>
<div class='x3'>A fragment is a reusable class implementing a portion of an activity.</div>
<ul>
<li>Reuseness: It's basically a combination of an XML layout file and a java class much like an Activity which encapsulate views and logic so that it is easier to reuse within activities.</li>
<li>Standalone: Fragments are standalone components that can contain views, events and logic.</li>
<li>Navigation patatrens: In a fragment-oriented architecture, activities become navigational containers that are primarily responsible for navigation fragment tp fragemnts/activity - presenting fragments and passing data.</li>
<li>Activities are navigation controllers primarily responsible for navigation to other activities through intents, where as Fragments are content controllers and contain most views, layouts, and event logic.</li>
<li>Like Activity, A fragment has an XML layout file and a Java class that represents the Fragment controller.</li>
<li>Fragment has it;s own lifecyclic callback functions: The onCreateView() method is called when Fragment should create its View object hierarchy. onViewCreated()  is triggered soon after onCreateView() and any view setup should performed here. Her have a list of other methos given Below</li>
</ul>
<table>
<caption>Table: Callbacks
</caption>
<tr><td>onAttach()</td><td>is called when a fragment is connected to an activity.</td></tr>
<tr><td>onCreate()</td><td>is called to do initial creation of the fragment.</td></tr>
<tr><td>onCreateView()</td><td>is called by Android once the Fragment should inflate a view.</td></tr>
<tr><td>onViewCreated()</td><td>is called after onCreateView() and ensures that the fragment's root view is non-null. Any view setup should happen here. E.g., view lookups, attaching listeners.</td></tr>
<tr><td>onActivityCreated()</td><td>is called when host activity has completed its onCreate() method.</td></tr>
<tr><td>onStart()</td><td>is called once the fragment is ready to be displayed on screen.</td></tr>
<tr><td>onResume()</td><td>Allocate “expensive” resources such as registering for location, sensor updates, etc.</td></tr>
<tr><td>onPause()</td><td>Release “expensive” resources. Commit any changes.</td></tr>
<tr><td>onDestroyView()</td><td>is called when fragment's view is being destroyed, but the fragment is still kept around.</td></tr>
<tr><td>onDestroy()</td><td>is called when fragment is no longer in use.</td></tr>
<tr><td>onDetach()</td><td>is called when fragment is no longer connected to the activity.</td></tr>
</table>
<ul>
<li>Fragment can't work by alone. It must be embeded inside the Activity  - either in XML files or adding it dynamically. It can be noted that, Before embedding a "support" fragment in an Activity make sure the Activity is changed to extend from FragmentActivity or AppCompatActivity which adds support for the fragment manager to all Android versions.</li>
<li>If we have Fragment Holder, it is possible to add, remkove and replace fragemnts uisng  FragmentTransaction .</li>
<li>Fragments should generally only communicate with their direct parent activity. If two fragemnts needs to comunicate, they should do that though Activity. Here, Activity is treaed as the controller managing all interaction with each of the fragments contained within. fragments should not directly communicate with each other as they needs to be modular, standalone and reusable component. Here are the possible way to do the communication:</li>
</ul>
<ol>
<li>Activities can initialize fragments with data during construction: pass data though the constracter of fragmnets.</li>
<li>Activities can pass data to fragments using methods on the fragment instance: Pass data using member function of fragments,</li>
<li>Fragments can communicate up to their parent activity using an interface and listeners: Fragemnt defines the callback inetrface and Parenet implementing it.</li>
<li>Fragments should pass data to other fragments only routed through their parent activity</li>
<li>Fragments can pass data to and from dialog fragments though the interface like sendBackResult.</li>
<li>Fragments can contain nested child fragments as outlined here</li>
</ol>
<div class='x3'>First, let;s define a xml file which will be render as a part of fragemnts</div>
<div class='code'>&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent" android:layout_height="match_parent"
    android:orientation="vertical" &gt;
    &lt;TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="TextView" /&gt;
    &lt;Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button" /&gt;
&lt;/LinearLayout&gt;
</div>
<div class='x3'>Second, Let's define the Fragment class which influate the view in xmlns</div>
<div class='code'>import android.support.v4.app.Fragment;
public class FooFragment extends Fragment {
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup parent, Bundle savedInstanceState) {
        return inflater.inflate(R.layout.fragment_foo, parent, false);
    }
    @Override
    public void onViewCreated(View view, Bundle savedInstanceState) {
        // EditText etFoo = (EditText) view.findViewById(R.id.etFoo);
        // Add listners
    }
}
</div>
<div class='x3'>Thirds, Now we can add the fragemnts inside activity layout as</div>
<div class='code'>&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" &gt;
    &lt;fragment
        android:name="com.example.android.FooFragment"
        android:id="@+id/fooFragment"
        android:layout_width="match_parent"
        android:layout_height="match_parent" /&gt;
&lt;/LinearLayout&gt;
</div>
<div class='x3'>OR</div>
<div class='code'>&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" &gt;
  &lt;FrameLayout
       android:id="@+id/your_placeholder" &lt;&lt;&lt; Placeholder
       android:layout_width="match_parent"
       android:layout_height="match_parent"&gt;
  &lt;/FrameLayout&gt;
&lt;/LinearLayout&gt;
</div>
<div class='x3'>Forth, This can now refer by Activity( if it is statically linked) or can be loaded dynamically using FragmentManager. We can lookup fragments either using ID or TAG or Pagers</div>
<div class='code'>public class MainActivity extends AppCompatActivity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        if (savedInstanceState == null) {
          // Look up by ID.
          DemoFragment fragmentDemo = (DemoFragment)
              getSupportFragmentManager().findFragmentById(R.id.fragmentDemo);

          //ADD THE TAG
          getSupportFragmentManager().beginTransaction().
              replace(R.id.flContainer, new DemoFragment(), "SOMETAG").
              commit();
          // Now later we can lookup the fragment by tag
          DemoFragment fragmentDemo = (DemoFragment)
              getSupportFragmentManager().findFragmentByTag("SOMETAG");

          // If you have view pager do this like.
          adapterViewPager.getRegisteredFragment(0);

          // Add Fragemnts Dynamically: It;s a three step procress.
          FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
          ft.replace(R.id.your_placeholder, new FooFragment());
          ft.commit();
        }
    }
}
</div>
<div class='x3'>Fifth, Let;s pass some data to the fragment while creating, generally It can be done using static method. This is because a Fragment must have only a constructor with no arguments.</div>
<div class='code'>public class DemoFragment extends Fragment {
    // Creates a new fragment given an int and title
    // DemoFragment.newInstance(5, "Hello");
    public static DemoFragment newInstance(int someInt, String someTitle) {
        DemoFragment fragmentDemo = new DemoFragment();
        Bundle args = new Bundle();
        args.putInt("someInt", someInt);
        args.putString("someTitle", someTitle);
        fragmentDemo.setArguments(args);
        return fragmentDemo;
    }
   @Override
   public void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       int SomeInt = getArguments().getInt("someInt", 0);
       String someTitle = getArguments().getString("someTitle", "");
   }
}
// Calls from Activity.
public class MainActivity extends AppCompatActivity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
        DemoFragment fragmentDemo = DemoFragment.newInstance(5, "my title");
        ft.replace(R.id.your_placeholder, fragmentDemo);
        ft.commit();
    }
}
</div>
<div class='x3'>Let's define a fragemnt and pass the data on runtime.</div>
<div class='code'>// Have Fragment
public class DemoFragment extends Fragment {
  public void doSomething(String param) {
      // handle this data.
  }
}
// In Activity.
public class MainActivity extends AppCompatActivity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        DemoFragment fragmentDemo = (DemoFragment)
            getSupportFragmentManager().findFragmentById(R.id.fragmentDemo);
        fragmentDemo.doSomething("some param");
    }
}
</div>
<div class='x3'>Now, Let;s try to pass some data from fragemnt to Activity.</div>
<div class='code'>import android.support.v4.app.Fragment;
public class MyListFragment extends Fragment {
  private OnItemSelectedListener listener;

  public interface OnItemSelectedListener {
    public void onItemSelected(String link);
  }

  // Store the listener (activity) that will have events fired once the fragment is attached
  @Override
  public void onAttach(Context context) {
      super.onAttach(context);
      if (context instanceof OnItemSelectedListener) {
        listener = (OnItemSelectedListener) context;
      } else {
        throw new ClassCastException(context.toString()
            + " must implement MyListFragment.OnItemSelectedListener");
      }
  }

  public void onSomeClick(View v) {
     listener.onItemSelected("some link");
  }
}
// Activity implements the Callback.
import android.support.v7.app.AppCompatActivity;
public class RssfeedActivity extends AppCompatActivity implements MyListFragment.OnItemSelectedListener {
    private DetailFragment fragment;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_rssfeed);
        fragment = (DetailFragment) getSupportFragmentManager() .findFragmentById(R.id.detailFragment);
  }

  @Override
  public void onItemSelected(String link) {
      if (fragment != null && fragment.isInLayout()) {
          // Handle the result.
      }
  }
}
</div>
<div class='x3'>The FragmentManager is responsible for all runtime management of fragments including adding, removing, hiding, showing, or otherwise navigating between fragments. It suppprts below method to do some work:</div>
<ol>
<li>addOnBackStackChangedListener - Add a new listener for changes to the fragment back stack.</li>
<li>beginTransaction() - Creates a new transaction to change fragments at runtime.</li>
<li>findFragmentById(int id) -	Finds a fragment by id usually inflated from activity XML layout.</li>
<li>findFragmentByTag(String tag):	Finds a fragment by tag usually for a runtime added fragment.</li>
<li>popBackStack() -	Remove a fragment from the backstack.</li>
<li>executePendingTransactions()	Forces committed transactions to be applied.</li>
</ol>
<div class='x3'>Here is an example of Fragment Trasation:</div>
<div class='code'>
</div>
<div class='x3'>Using fragmen, it is possible to customize the backStack operation. A record of all Fragment transactions is kept for each Activity by the FragmentManager. When used properly, this allows the user to hit the device’s back button to remove previously added Fragments.</div>
<div class='code'>//add to backStack
FragmentTransaction fts = getSupportFragmentManager().beginTransaction();
fts.replace(R.id.flContainer, new FirstFragment());
fts.addToBackStack("optional_tag");
fts.commit();

// Just remove the lastly added.
FragmentManager fragmentManager = getSupportFragmentManager();
if (fragmentManager.getBackStackEntryCount() &gt; 0) {
    fragmentManager.popBackStack();
}

//Just go back to specif TAG
FragmentManager fragmentManager = getSupportFragmentManager();
if (fragmentManager.getBackStackEntryCount() &gt; 0) {
    fragmentManager.popBackStack("optional_tag");
}
</div>
<div class='x3'>We can easily show/hide the fragemnt then calling replaces - This can be good because this will release memory and make the UI snappier. For example :</div>
<div class='code'>private FragmentA fragmentA;
private FragmentB fragmentB;
private FragmentC fragmentC;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    if (savedInstanceState == null) {
        fragmentA = FragmentA.newInstance("foo");
        fragmentB = FragmentB.newInstance("bar");
        fragmentC = FragmentC.newInstance("baz");
    }
}

// NOT so good
protected void displayFragmentA() {
    FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
    // removes the existing fragment calling onDestroy
    ft.replace(R.id.flContainer, fragmentA);
    ft.commit();
}

// Better
protected void displayFragmentA() {
    FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
    if (fragmentA.isAdded()) { // if the fragment is already in container
        ft.show(fragmentA);
    } else { // fragment needs to be added to frame container
        ft.add(R.id.flContainer, fragmentA, "A");
    }
    // Hide fragment B
    if (fragmentB.isAdded()) { ft.hide(fragmentB); }
    // Hide fragment C
    if (fragmentC.isAdded()) { ft.hide(fragmentC); }
    // Commit changes
    ft.commit();
}
</div>
<div class='x2' id='hashid14'>Executing Async Jobs in android.</div>
<div class='x2' id='hashid15'>WebSocket Support to Android</div>
<div class='x3'>Step1: Let's consider the below example for build the server.</div>
<div class='code'>const WebSocket = require('ws');
const wss = new WebSocket.Server({ port: 8080 });
wss.on('connection', function connection(ws) {
  ws.on('message', function incoming(message) {
    console.log('received: %s', message);
  });
  ws.send('something');
});

// Store this as server.js file.
// $node server.js
</div>
<div class='x3'>Step2: Let's test the code from sample HTML</div>
<div class='code'>&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
	&lt;meta charset="utf-8"&gt;
	&lt;title&gt; WebSocket&lt;/title&gt;
  &lt;script src="/socket.io/socket.io.js" &gt;&lt;/script&gt;
  &lt;script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.1.1/socket.io.js"&gt;&lt;/script&gt;
  &lt;script src="http://code.jquery.com/jquery-1.10.1.min.js"&gt;&lt;/script&gt;
  &lt;script&gt;
      var socket = io.connect('http://0.0.0.0:8088');
      socket.on('message', function (data) {
        console.log(data);
        socket.emit('my other event', { my: 'data' });
      });
      function send(){
        socket.emit('message', {tag: 'info',data:"hello"});
      }
  &lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;button type="button" onclick="send();"&gt;Click Me!&lt;/button&gt;
&lt;/body&gt;
&lt;/html&gt;
</div>
<div class='x3'>Step3: Now let's write android plagins to send and recv data from our server.</div>
<div class='code'>
</div>
<div class='x1' id='hashid16'>Support personalize Experice.</div>
<div class='x3'>In this perticulr section, i will be discussion with how to personalized your app experince for the user. The term "Personlization" means that your app should resposnce perfactly for the multiple devices, user can choose their languages and user can have their own theme etc.</div>
<div class='x2' id='hashid17'>Supporting mutiple languages</div>
<div class='x3'>Let's consider supporting hindi and english langues for a app.</div>
<div class='x3'>Step1: Let;s have this layout. Note that we NOT hardcoding the string.</div>
<div class='code'>
</div>
<div class='x3'>Step2: Define the defalut string in res/values/strings.xml.</div>
<div class='code'>
</div>
<div class='x3'>Step3: Define the hindi language string in res/values/strings-hi.xml. You can support mutiple languages using the file name as res/values/strings-<language-code>.xml</div>
<div class='code'>
</div>
<div class='x3'>Step 4: Now we we just have the  fun. You can go the device setting -> personal -> languages -> choose language and You will see the language of the app has chnages. We can do it programitically as below:</div>
<div class='code'>import android.app.Activity;
import android.content.res.Configuration;
import android.os.Bundle;

public class Main extends Activity {
  /** Called when the activity is first created. */
  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    String languageToLoad  = "fa"; // your language "hi" for hindi and "en" for english
    Locale locale = new Locale(languageToLoad);
    Locale.setDefault(locale);
    Configuration config = new Configuration();
    config.locale = locale;
    getBaseContext().getResources().updateConfiguration(config,
      getBaseContext().getResources().getDisplayMetrics());
    this.setContentView(R.layout.main);
  }
  private void change(){
    Resources res = context.getResources();
    // Change locale settings in the app.
    DisplayMetrics dm = res.getDisplayMetrics();
    android.content.res.Configuration conf = res.getConfiguration();
    conf.setLocale(new Locale(language_code.toLowerCase())); // API 17+ only.
    // Use conf.locale = new Locale(...) if targeting lower versions
    res.updateConfiguration(conf, dm);
  }
}
</div>
<div class='x3'>Step 5: You can persisit the language choice for the app as below:</div>
<div class='code'>public class BaseActivity extends AppCompatActivity {
    private Locale mCurrentLocale;
    @Override
    protected void onStart() {
        super.onStart();
        mCurrentLocale = getResources().getConfiguration().locale;
    }
    @Override
    protected void onRestart() {
        super.onRestart();
        Locale locale = getLocale(this);
        if (!locale.equals(mCurrentLocale)) {
            mCurrentLocale = locale;
            recreate();
        }
    }
    public static Locale getLocale(Context context){
        SharedPreferences sharedPreferences = PreferenceManager.getDefaultSharedPreferences(context);
        String lang = sharedPreferences.getString("language", "en");
        switch (lang) {
            case "English":
                lang = "en";
                break;
            case "Spanish":
                lang = "es";
                break;
        }
        return new Locale(lang);
    }
}
public class App extends Application {
    @Override
    public void onCreate() {
        super.onCreate();
        setLocale();
    }
    @Override
    public void onConfigurationChanged(Configuration newConfig) {
        super.onConfigurationChanged(newConfig);
        setLocale();
    }
    private void setLocale() {
        final Resources resources = getResources();
        final Configuration configuration = resources.getConfiguration();
        final Locale locale = getLocale(this);
        if (!configuration.locale.equals(locale)) {
            configuration.setLocale(locale);
            resources.updateConfiguration(configuration, null);
        }
    }
}
</div>
<div class='x2' id='hashid18'>Supporting seperate layout for differnt devices.</div>
<div class='x3'>Sometime it's required to have multiple layout of the UI for phone or tablet. We can easilty do that by spacifying mutple layout file. We can alos spacify multiple dimention files to spacidify differnet weidth of the buttons for phone and tablet.</div>
<div class='x3'>Step1: We can have two diffetnt layoyt for phone and 7 each tablet in res/layout/main_activity.xml    and res/layout-sw600dp/main_activity.xml(600dp or bigger).</div>
<div class='code'>
</div>
<table>
<caption>Table: Topical screen size:
</caption>
<tr><td>320dp</td><td>a typical phone screen (240x320 ldpi, 320x480 mdpi, 480x800 hdpi, etc). 4 inch phone</td></tr>
<tr><td>480dp</td><td>a large phone screen ~5" (480x800 mdpi). 5 inch phone</td></tr>
<tr><td>600dp</td><td>a small 7” tablet (600x1024 mdpi).</td></tr>
<tr><td>720dp</td><td>a 10” Larget tablet (720x1280 mdpi, 800x1280 mdpi, etc).</td></tr>
<tr><td>840dp</td><td>larget tablet</td></tr>
<tr><td>960dp</td><td>Very large tablet</td></tr>
<tr><td>1280dp</td><td>large</td></tr>
<tr><td>1440dp</td><td>large</td></tr>
<tr><td>1600dp</td><td>large</td></tr>
<tr><td>1920dp</td><td>Extra large</td></tr>
</table>
<table>
<caption>Table: Which file to store what?
</caption>
<tr><td>res/layout/main_activity.xml</td><td>For handsets (smaller than 600dp available width)</td></tr>
<tr><td>res/layout-w600dp/main_activity.xml</td><td>For 7” tablets or any screen with 600dp</td></tr>
<tr><td>res/layout/main_activity.xml</td><td>For handsets</td></tr>
<tr><td>res/layout-land/main_activity.xml</td><td>For handsets in landscape</td></tr>
<tr><td>res/layout-sw600dp/main_activity.xml</td><td>For 7” tablets</td></tr>
<tr><td>res/layout-sw600dp-land/main_activity.xml</td><td>For 7” tablets in landscape</td></tr>
<tr><td>res/layout/main_activity.xml</td><td>For handsets (smaller than 640dp x 480dp)</td></tr>
<tr><td>res/layout-large/main_activity.xml</td><td>For small tablets (640dp x 480dp and bigger)</td></tr>
<tr><td>res/layout-xlarge/main_activity.xml</td><td>For large tablets (960dp x 720dp and bigger)</td></tr>
</table>
<div class='x3'>You could also use layout alias. It can be defined all files inside layout, however, we can distrigushed the by having differnet values file.</div>
<div class='code'>res/layout/main.xml            # single-pane layout
res/layout/main_twopanes.xml   # two-pane layout

And add these two files:
res/values-large/layout.xml:
&lt;resources&gt;
    &lt;item name="main" type="layout"&gt;@layout/main_twopanes&lt;/item&gt;
&lt;/resources&gt;

res/values-sw600dp/layout.xml:
&lt;resources&gt;
    &lt;item name="main" type="layout"&gt;@layout/main_twopanes&lt;/item&gt;
&lt;/resources&gt;
</div>
<div class='x2' id='hashid19'>Supporting different button width for diffent devices.</div>
<div class='x3'>You must understand the diff betwen dip and sp. Yhen you specify spacing between two views, use dp and When specifying text size, always use sp:</div>
<div class='code'>&lt;Button android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/clickme"
    android:layout_marginTop="20dp" /&gt;


&lt;TextView android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:textSize="20sp" /&gt;
</div>
<div class='x3'>For example, You have a button view and You would like to have multiple dimention for this button for multiple devices. How to do that? Let's creates values folders and a dimens files in each folder. Based on your requirement you can give padding or any dimen values. As you  given, you should give same name for dimen in all the folders. Android will  automatically pick the dimen value based on your screen size.</div>
<div class='code'>&lt;textView
  android:padding="@dimen/padding_1
  /&gt;

values/dimens.xml
&lt;dimen name="padding_1"&gt;5dp&lt;/dimen&gt;

values-sw360dp/dimens.xml
&lt;dimen name="padding_1"&gt;5dp&lt;/dimen&gt;

values-sw480dp/dimens.xml
&lt;dimen name="padding_1"&gt;8dp&lt;/dimen&gt;

values-sw600dp/dimens.xml
&lt;dimen name="padding_1"&gt;10dp&lt;/dimen&gt;

values-sw720dp/dminen.xml
&lt;dimen name="padding_1"&gt;13dp&lt;/dimen&gt;

</div>
<div class='x2' id='hashid20'>Supporting multiple images</div>
<div class='x3'>When you want to use image, you must provides the below variabtion:</div>
<div class='code'>res/
  drawable-xxxhdpi/
    awesome-image.png
  drawable-xxhdpi/
    awesome-image.png
  drawable-xhdpi/
    awesome-image.png
  drawable-hdpi/
    awesome-image.png
  drawable-mdpi/
    awesome-image.png
</div>
<table>
<caption>Table: This table is showing image size of each
</caption>
<tr><td>36x36</td><td>(0.75x) for low-density (ldpi)</td></tr>
<tr><td>48x48</td><td>(1.0x baseline) for medium-density (mdpi)</td></tr>
<tr><td>72x72</td><td>(1.5x) for high-density (hdpi)</td></tr>
<tr><td>96x96</td><td>(2.0x) for extra-high-density (xhdpi)</td></tr>
<tr><td>144x144</td><td>(3.0x) for extra-extra-high-density (xxhdpi)</td></tr>
<tr><td>192x192</td><td>(4.0x) for extra-extra-extra-high-density (xxxhdpi)</td></tr>
</table>
<div class='x1' id='hashid21'>Android Networking</div>
<div class='x2' id='hashid22'>Connecting websocket</div>
<div class='x3'>WebSocket providing full-duplex communication channels over a single TCP connection. It is supported in HTML 5. Since the version 3.5 of the OkHttp library, you can also use WebSockets connection in your Android applications. Let's try to use it.</div>
<div class='code'>Step1: Add Dependency
compile 'com.squareup.okhttp3:okhttp:3.6.0'
</div>
<div class='x3'>Step2:</div>
<div class='x3'>package in.co.dipankar.quickandorid.utils;</div>
<div class='code'>package in.co.dipankar.quickandorid.utils;

import okhttp3.OkHttpClient;
import okhttp3.Request;
import okhttp3.Response;
import okhttp3.WebSocket;
import okhttp3.WebSocketListener;
import okio.ByteString;

public class WSUtils {

    private String mUrl;
    private OkHttpClient mClient;
    public interface Callback{
        public void onConnected();
        public void onDisconnected();
        public void onMessage(String message);
        public void onError();
    }
    private  WebSocket mWebSocket;
    private Callback mCallback;

    public  WSUtils(String url, Callback callback){
        mUrl = url;
        mCallback = callback;
        init();
    }
    private void init(){
        mClient = new OkHttpClient();
        Request request = new Request.Builder().url(mUrl).build();
        WebSocket ws = mClient.newWebSocket(request, new WebSocketListener() {
            @Override
            public void onOpen(WebSocket webSocket, Response response) {
                super.onOpen(webSocket, response);
                mCallback.onConnected();
                mWebSocket = webSocket;
            }

            @Override
            public void onMessage(WebSocket webSocket, String text) {
                super.onMessage(webSocket, text);
                mCallback.onMessage(text);
            }

            @Override
            public void onMessage(WebSocket webSocket, ByteString bytes) {
                super.onMessage(webSocket, bytes);
                mCallback.onMessage(bytes.toString());
            }

            @Override
            public void onClosing(WebSocket webSocket, int code, String reason) {
                super.onClosing(webSocket, code, reason);
                mWebSocket.close(1, null);
                mWebSocket = null;
            }

            @Override
            public void onClosed(WebSocket webSocket, int code, String reason) {
                super.onClosed(webSocket, code, reason);
                mCallback.onDisconnected();
            }

            @Override
            public void onFailure(WebSocket webSocket, Throwable t, Response response) {
                super.onFailure(webSocket, t, response);
                mCallback.onError();
            }
        });

    }

    public boolean sendMessage(String message){
        if(mWebSocket != null){
            mWebSocket.send(message);
            return true;
        } else {
            mCallback.onError();
            return false;
        }
    }

    public boolean connect(){
        return true;
    }
    public boolean disconnect(){
        if(mWebSocket != null){
            mClient.dispatcher().executorService().shutdown();
            return true;
        } else{
            return false;
        }
    }
}
</div>
<div class='x3'>Step 3: Here is how it can be used form your activity:</div>
<div class='code'>private void testWebSocket() {
    WSUtils ws = new WSUtils("ws://echo.websocket.org", new WSUtils.Callback(){

        @Override
        public void onConnected() {
            DLog.e("WS onConnected");
        }

        @Override
        public void onDisconnected() {
            DLog.e("WS onDisconnected");
        }

        @Override
        public void onMessage(String message) {
            DLog.e("WS onMessage");
        }

        @Override
        public void onError() {
            DLog.e("WS onError");
        }
    });
    ws.sendMessage("Hello");
    ws.disconnect();
}
</div>
<div class='x2' id='hashid23'>Simple Network Calls to parse JSON.</div>
<div class='x3'>Similar to web socket, we can have our simple network Module to send web request as given as example.</div>
<div class='code'>    compile 'com.squareup.okhttp3:okhttp:3.2.0'
</div>
<div class='x3'>Step2: Now you have some simple Utils class like this:</div>
<div class='code'>package in.co.dipankar.quickandorid.utils;


import org.json.JSONObject;

import java.io.IOException;
import java.util.Map;

import okhttp3.Call;
import okhttp3.MediaType;
import okhttp3.OkHttpClient;
import okhttp3.Request;
import okhttp3.RequestBody;
import okhttp3.Response;

public class HTTPUtils {

    public interface  Callback{
        public void onBeforeSend();
        public void onSuccess(JSONObject obj);
        public void onError(String msg);
    }
    private  OkHttpClient mClient;
    public HTTPUtils(){
        mClient = new OkHttpClient();
    }

    public boolean get(String url, final Callback callback){
        Request request = new Request.Builder()
                .url(url)
                .get()
                .build();
        callback.onBeforeSend();
        mClient.newCall(request).enqueue( new okhttp3.Callback() {
            @Override
            public void onFailure(Call call, IOException e) {
                if(callback != null) {
                    callback.onError("Internal error:" + e.getMessage());
                }
            }
            @Override
            public void onResponse(Call call, Response response) throws IOException {
                if (callback != null) {
                    try {
                        String jsonData = response.body().string();
                        JSONObject Jobject = new JSONObject(jsonData);
                        callback.onSuccess(Jobject);
                    } catch (Exception e) {
                        e.printStackTrace();
                        callback.onError(
                                "Internal error happened while parsing the json object");
                    }
                }
            }
        });
        return true;
    }

    public boolean post(String url, Map&lt;String, String&gt; data, final  Callback callback){
        JSONObject json = new JSONObject();
        if(data!= null) {
            try {
                for (Map.Entry&lt;String, String&gt; entry : data.entrySet()) {
                    json.put(entry.getKey(), entry.getValue());
                }
            } catch (Exception e) {
                e.printStackTrace();
                return false;
            }
        }
        MediaType JSON = MediaType.parse("application/json; charset=utf-8");
        RequestBody body = RequestBody.create(JSON, json.toString());
        callback.onBeforeSend();
        Request request = new Request.Builder().url(url).post(body).build();
        mClient.newCall(request).enqueue(new okhttp3.Callback() {
            @Override
            public void onFailure(Call call, IOException e) {
                if (callback != null) {
                    callback.onError(e.toString());
                }
            }

            @Override
            public void onResponse(Call call, Response response) throws IOException {
                if (callback != null) {
                    try {
                        String jsonData = response.body().string();
                        JSONObject Jobject = new JSONObject(jsonData);
                        callback.onSuccess(Jobject);
                    } catch (Exception e) {
                        e.printStackTrace();
                        callback.onError("Internal error happened while parsing the json object");
                    }
                }
            }
        });
        return true;
    }
}
</div>
<div class='x3'>Step3: He is how you can call thease utils from your android Activity or from whatever you want:</div>
<div class='code'>    private void testHTTPUtils() {
        HTTPUtils httpUtils = new HTTPUtils();
        httpUtils.get("http://simplestore.dipankar.co.in/api/test", new HTTPUtils.Callback() {
            @Override
            public void onBeforeSend() {
                DLog.e("HTTPUtils onBeforeSend");
            }

            @Override
            public void onSuccess(JSONObject obj)  {
                try {
                    DLog.e("HTTPUtils onSuccess"+obj.getString("status"));
                } catch (JSONException e) {
                    e.printStackTrace();
                }
            }

            @Override
            public void onError(String msg) {
                DLog.e("HTTPUtils onError");
            }
        });

        Map&lt;String, String&gt; data = new HashMap&lt;&gt;();
        data.put("name", "dipankar");
        httpUtils.post("http://simplestore.dipankar.co.in/api/test", data, new HTTPUtils.Callback() {
            @Override
            public void onBeforeSend() {
                DLog.e("HTTPUtils onBeforeSend");
            }

            @Override
            public void onSuccess(JSONObject obj)  {
                try {
                    DLog.e("HTTPUtils onSuccess"+obj.getString("status"));
                } catch (JSONException e) {
                    e.printStackTrace();
                }
            }

            @Override
            public void onError(String msg) {
                DLog.e("HTTPUtils onError");
            }
        });
    }
</div>
<div class='x3'>Synchronous Get</div>
<div class='code'>    OkHttpClient client = new OkHttpClient();
Request request = new Request.Builder()
  .url("http://www.ssaurel.com/tmp/toto.txt")
  .build();
Response response = client.newCall(request).execute();
if (!response.isSuccessful()) {
  // manage error
  Log.e("Unexpected code " + response);
  return;
}
Headers responseHeaders = response.headers();
// show response headers
for (int i = 0; i &lt; responseHeaders.size(); i++) {
  Log.i(responseHeaders.name(i) + ": " + responseHeaders.value(i));
}
// show body content
Log.i(response.body().string());
</div>
<div class='x3'>Aync Get Request</div>
<div class='code'>    OkHttpClient client = new OkHttpClient();
Request request = new Request.Builder()
  .url("http://www.ssaurel.com/tmp/toto.txt")
  .build();
client.newCall(request).enqueue(new Callback() {
  @Override public void onFailure(Call call, IOException e) {
    // manage failure !
  }
  @Override public void onResponse(Call call, Response response) throws IOException {
    if (!response.isSuccessful()) {
      // manage error
      Log.e("Unexpected code " + response);
      return;
    }
    Headers responseHeaders = response.headers();
    // show response headers
    for (int i = 0; i &lt; responseHeaders.size(); i++) {
      Log.i(responseHeaders.name(i) + ": " + responseHeaders.value(i));
    }
    // show body content
    Log.i(response.body().string());
  }
});
</div>
<div class='x3'>Accessing headers</div>
<div class='code'>    private final OkHttpClient client = new OkHttpClient();

  public void run() throws Exception {
    Request request = new Request.Builder()
        .url("https://api.github.com/repos/square/okhttp/issues")
        .header("User-Agent", "OkHttp Headers.java")
        .addHeader("Accept", "application/json; q=0.5")
        .addHeader("Accept", "application/vnd.github.v3+json")
        .build();

    try (Response response = client.newCall(request).execute()) {
      if (!response.isSuccessful()) throw new IOException("Unexpected code " + response);

      System.out.println("Server: " + response.header("Server"));
      System.out.println("Date: " + response.header("Date"));
      System.out.println("Vary: " + response.headers("Vary"));
    }
  }
</div>
<div class='x3'>POST jSON Request</div>
<div class='code'>public static final MediaType JSON
= MediaType.parse("application/json; charset=utf-8");
OkHttpClient client = new OkHttpClient();
String url = "http://www.ssaurel.com/tmp/jsonService";
String json = "{'mode' : 'test'}"; // Json Content ...
RequestBody body = RequestBody.create(JSON, json);
Request request = new Request.Builder()
  .url(url)
  .post(body)
  .build();
Response response = client.newCall(request).enqueue(new Callback() {
  @Override public void onFailure(Call call, IOException e) {
    // manage failure
  }
  @Override public void onResponse(Call call, Response response) throws IOException {
    // Manage response
    Log.i(response.body().string());
  }
});
</div>
<div class='x3'>Posting a file</div>
<div class='code'>ublic static final MediaType MEDIA_TYPE_MARKDOWN
      = MediaType.parse("text/x-markdown; charset=utf-8");

  private final OkHttpClient client = new OkHttpClient();

  public void run() throws Exception {
    File file = new File("README.md");

    Request request = new Request.Builder()
        .url("https://api.github.com/markdown/raw")
        .post(RequestBody.create(MEDIA_TYPE_MARKDOWN, file))
        .build();

    try (Response response = client.newCall(request).execute()) {
      if (!response.isSuccessful()) throw new IOException("Unexpected code " + response);

      System.out.println(response.body().string());
    }
  }
</div>
<div class='x3'>Post Request with form params</div>
<div class='code'>    private final OkHttpClient client = new OkHttpClient();

  public void run() throws Exception {
    RequestBody formBody = new FormBody.Builder()
        .add("search", "Jurassic Park")
        .build();
    Request request = new Request.Builder()
        .url("https://en.wikipedia.org/w/index.php")
        .post(formBody)
        .build();

    try (Response response = client.newCall(request).execute()) {
      if (!response.isSuccessful()) throw new IOException("Unexpected code " + response);

      System.out.println(response.body().string());
    }
  }
</div>
<div class='x3'>OKHTTP Cacheing</div>
<div class='code'>    int cacheSize = 10 * 1024 * 1024; // 10MB
OkHttpClient.Builder builder = new OkHttpClient.Builder()
        .cache(new Cache(context.getCacheDir(), cacheSize)
        ....

new Request.Builder().cacheControl(CacheControl.FORCE_CACHE)
    ...;

</div>
<div class='x3'>Handing Timeouts for all calls</div>
<div class='code'>    private final OkHttpClient client;

  public ConfigureTimeouts() throws Exception {
    client = new OkHttpClient.Builder()
        .connectTimeout(10, TimeUnit.SECONDS)
        .writeTimeout(10, TimeUnit.SECONDS)
        .readTimeout(30, TimeUnit.SECONDS)
        .build();
  }

  public void run() throws Exception {
    Request request = new Request.Builder()
        .url("http://httpbin.org/delay/2") // This URL is served with a 2 second delay.
        .build();

    try (Response response = client.newCall(request).execute()) {
      System.out.println("Response completed: " + response);
    }
  }
</div>
<div class='x3'>Handing Timeouts for each call</div>
<div class='code'>    private final OkHttpClient client = new OkHttpClient();

  public void run() throws Exception {
    Request request = new Request.Builder()
        .url("http://httpbin.org/delay/1") // This URL is served with a 1 second delay.
        .build();

    // Copy to customize OkHttp for this request.
    OkHttpClient client1 = client.newBuilder()
        .readTimeout(500, TimeUnit.MILLISECONDS)
        .build();
    try (Response response = client1.newCall(request).execute()) {
      System.out.println("Response 1 succeeded: " + response);
    } catch (IOException e) {
      System.out.println("Response 1 failed: " + e);
    }

    // Copy to customize OkHttp for this request.
    OkHttpClient client2 = client.newBuilder()
        .readTimeout(3000, TimeUnit.MILLISECONDS)
        .build();
    try (Response response = client2.newCall(request).execute()) {
      System.out.println("Response 2 succeeded: " + response);
    } catch (IOException e) {
      System.out.println("Response 2 failed: " + e);
    }
  }
</div>
<div class='x2' id='hashid24'>Having HTTP server inside android App</div>
<div class='x3'>Step1: Add Dependency</div>
<div class='code'>    compile 'org.nanohttpd:nanohttpd:2.2.0'
</div>
<div class='x3'>Write your own Server Utils</div>
<div class='code'>package in.co.dipankar.quickandorid.utils;

import org.json.JSONObject;

import java.io.IOException;
import java.util.Map;
import fi.iki.elonen.NanoHTTPD;

public class HttpdUtils extends NanoHTTPD {
    public interface Result{
        public String getStatus();
        public String getData();
    }

    public interface Callback{
        public Result Handle(String key);
        public void onSuccess(String msg);
        public void onError(String msg);
    }

    private Callback mCallback;
    public HttpdUtils(Callback callback) {
        super(8081);
        mCallback = callback;
        this.start();
    }

    @Override public Response serve(IHTTPSession session) {
        Method method = session.getMethod();
        String uri = session.getUri();
        System.out.println(method + " '" + uri + "' ");
        Result result = mCallback.Handle(uri);

        return NanoHTTPD.newFixedLengthResponse(result.getData());
    }

    @Override
    public void start(){
        try {
            super.start();
            mCallback.onSuccess("started");
        } catch (IOException e) {
            e.printStackTrace();
            mCallback.onError("Not able start");
        }
    }

    @Override
    public void stop(){
        super.stop();
        mCallback.onSuccess("stoped");
    }
}
</div>
<div class='x3'>Now when you start your app the server will start</div>
<div class='x3'>Is my server is runing :</div>
<div class='code'>$ adb shell
$ generic_x86:/ # lsof  -l | grep 8081 
kandroide 24907      10088   54u     IPv6                          0t0    1569923 TCP []:8081-&gt;[]:0 (LISTEN) 
</div>
<div class='x3'>Now connect it from your host and Hit the BOX</div>
<div class='code'>$ adb forward tcp:8081 tcp:8081
$ curl http://localhost:8081/gsf
</div>
<div class='x3'>With this infra, we can build our own App Automation and App helper to execute any code for debugging, Let's consider the below Remote Debugger which allows us to set and get the Pref from your laptop.</div>
<div class='code'>    package in.co.dipankar.quickandorid.utils;

import android.content.Context;
import android.content.SharedPreferences;

import java.util.Arrays;
import java.util.List;
import java.util.Map;

import static android.content.Context.MODE_PRIVATE;

public class RemoteDebug {
    private HttpdUtils mHttpdUtils;
    private Context mContext;

    public RemoteDebug(Context context){
        mContext = context;
        mHttpdUtils = new HttpdUtils(8081, new HttpdUtils.Callback() {
            @Override
            public String Handle(String method, String key, Map&lt;String, String&gt; param) {
                String data = param.get("data");
                switch (key){
                    case "/setPref":
                        return setPerf(data);
                    case "/getPref":
                        return getPerf(data);
                    default:
                        return "Invalid command Sent!\n";

                }
            }
            @Override
            public void onSuccess(String msg) {}

            @Override
            public void onError(String msg) {}
        });
    }
    private String setPerf(String data){
        if(data == null || data.length() &lt; 1){
            return "Please pass some args\n";
        }
        List&lt;String&gt; tokens = Arrays.asList(data.split(" "));
        if(tokens.size() &lt; 3){
            return "Less args sent";
        }
        SharedPreferences.Editor editor = mContext.getSharedPreferences("test", MODE_PRIVATE).edit();
        switch(tokens.get(0)){
            case "S":
                editor.putString(tokens.get(1), tokens.get(2));
                editor.apply();
                return "Set Successfully";
            case "I":
                editor.putInt(tokens.get(1), Integer.parseInt(tokens.get(2)));
                editor.apply();
                return "Set Successfully";

        }
        return "Not able to set the shared pref";
    }
    private String getPerf(String data){
        if(data == null || data.length() &lt; 1){
            return "Please send some args\n";
        }
        List&lt;String&gt; tokens = Arrays.asList(data.split(" "));
        if(tokens.size() &lt; 2){
            return "Less args sent";
        }
        SharedPreferences prefs = mContext.getSharedPreferences("test", MODE_PRIVATE);

        switch(tokens.get(0)){
            case "S":
                return prefs.getString(tokens.get(1),"null");
            case "I":
                int x =  prefs.getInt(tokens.get(1),-1);
                return x+"";

        }
        return "Not able to get the shared pref";
    }
}

</div>
<div class='x3'>From Activity, You needs to initilized this:</div>
<div class='code'>    private void testRemoteDebuging() {
    RemoteDebug remoteDebug = new RemoteDebug(this);
}
</div>
<div class='x3'>Ans how it can be used:</div>
<div class='code'>dip-pro:books dip$ curl http://localhost:8081/getPref?data=I%20me%2010
10
dip-pro:books dip$ curl http://localhost:8081/setPref?data=I%20me%20100
Set Successfully
dip-pro:books dip$ curl http://localhost:8081/getPref?data=I%20me%2010
100
dip-pro:books dip$ curl http://localhost:8081/getPref?data=I%20me%2010
100
dip-pro:books dip$ curl http://localhost:8081/setPref?data=I%20me%20100
Set Successfully
dip-pro:books dip$ 
</div></div>
</div>
<div class="footer">
<p> Do you know this book/HTML is generated from a text file? I traied to use MS word and other software and its seems to be very hard to maintain, sync and reformat - So i get into this crazy idea - just have a text file and write into it. I have a python svript whcih just convert this text into html.</p>
<p> You are free to copy and share the content.  This book is free and always would be. If you have design question or find a bug in this book, please file a bug in github or mail me dutta.dipankar08@gmail.com</p>
<p> This site is add-free and planned to have add free till 2025. If you want to contribute, there are two easy way to do that - just send new content to me.</p>
<p> copyright @ 2018 . Dipankar Dutta </p>
<p> Made with Love from India <p>
</div>
</body>
</html>

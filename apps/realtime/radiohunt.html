<html>

<head>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
        <script src="https://www.chartjs.org/dist/2.8.0/Chart.min.js"></script>


        <link rel="stylesheet" type="text/css"
                href="https://cdn.jsdelivr.net/gh/dipankar08/SimpleStyle/simplestyle.css" />
        <script src="https://cdn.jsdelivr.net/gh/dipankar08/SimpleStyle/simplestore_client.js"></script>


        <link rel="stylesheet" type="text/css" href="mystyle.css" />
        <script src="simplestore_client.js"></script>
        <script>
                function showLaunch() {
                        fillChartDistribution('topTenChart',"http://simplestore.dipankar.co.in/api/analytics/distribution?ts_insert=@today&type=launch&_field=app_version&_strategy=chartjs")
                        buildTimeSeriesMulti('timelineChart',"http://simplestore.dipankar.co.in/api/analytics/ts_multi?type=launch", {
                        "_payload": [
                                {},
                                {"app_id": "in.peerreview.fmradioindia"},
                                {"app_id": "in.peerreview.radiohunt_tamil"},
                                {"app_id": "in.peerreview.radiohunt_kannada"},
                                {"app_id": "in.peerreview.radiohunt_telugu"},
                                {"app_id": "in.peerreview.radiohunt_malayalam"},
                                {"app_id": "in.peerreview.radiohunt_hindi"},
                                {"app_id": "in.peerreview.radiohunt_marathi"},
                                {"app_id": "in.peerreview.radiohunt_punjabi"},
                                {"app_id": "in.peerreview.radiohunt_odia"},
                        ]
                        })
                }

                function showException() {
                        fillChartDistribution('topTenChart',"http://simplestore.dipankar.co.in/api/analytics/distribution?ts_insert=@today&type=exception&_strategy=chartjs&_field=location")
                        buildTimeSeriesMulti('timelineChart',"http://simplestore.dipankar.co.in/api/analytics/ts_multi?type=exception", {
                        "_payload": [
                                {},
                                {"app_id": "in.peerreview.fmradioindia"},
                                {"app_id": "in.peerreview.radiohunt_tamil"},
                                {"app_id": "in.peerreview.radiohunt_kannada"},
                                {"app_id": "in.peerreview.radiohunt_telugu"},
                                {"app_id": "in.peerreview.radiohunt_malayalam"},
                                {"app_id": "in.peerreview.radiohunt_hindi"},
                                {"app_id": "in.peerreview.radiohunt_marathi"},
                                {"app_id": "in.peerreview.radiohunt_punjabi"},
                                {"app_id": "in.peerreview.radiohunt_odia"},
                        ]
                        })
                }
                function showAdsStat() {
                        fillChartDistribution('topTenChart',"http://simplestore.dipankar.co.in/api/analytics/distribution?ts_insert=@today&tag=regex:TELEMETRY_ADS_&_strategy=chartjs&_field=tag")
                        buildTimeSeriesMulti('timelineChart',"http://simplestore.dipankar.co.in/api/analytics/ts_multi", {
                        "_payload": [
                                {"tag": "TELEMETRY_ADS_LOAD"},
                                {"tag": "TELEMETRY_ADS_REQUEST"},
                                {"tag": "TELEMETRY_ADS_LOAD_ERROR"},
                                {"tag": "TELEMETRY_ISTL_ADS_REQUEST"}]
                        })
                }

                function showExperiments() {
                        fillChartDistribution('topTenChart',"http://simplestore.dipankar.co.in/api/analytics/distribution?ts_insert=@today&tag=regex:TELEMETRY_ADS_&_strategy=chartjs&_field=tag")
                        buildTimeSeriesMulti('timelineChart',"http://simplestore.dipankar.co.in/api/analytics/ts_multi", {
                        "_payload": [
                                {"tag": "TELEMETRY_CLICK_SIMILAR_ITEM"},
                                {"tag": "TELEMETRY_DIALOG_SHARE"},
                                {"tag": "TELEMETRY_DIALOG_RATING"}]
                        })
                }


                function showPlayStat() {
                        fillChartDistribution('topTenChart',"http://simplestore.dipankar.co.in/api/analytics/distribution?ts_insert=@today&tag=regex:TELEMETRY_PLAYER_&_strategy=chartjs&_field=tag")
                        buildTimeSeriesMulti('timelineChart', "http://simplestore.dipankar.co.in/api/analytics/ts_multi?tag=TELEMETRY_PLAYER_TRY", {
                                "_payload": [             {},
                                {"app_id": "in.peerreview.fmradioindia"},
                                {"app_id": "in.peerreview.radiohunt_tamil"},
                                {"app_id": "in.peerreview.radiohunt_kannada"},
                                {"app_id": "in.peerreview.radiohunt_telugu"},
                                {"app_id": "in.peerreview.radiohunt_malayalam"},
                                {"app_id": "in.peerreview.radiohunt_hindi"},
                                {"app_id": "in.peerreview.radiohunt_marathi"},
                                {"app_id": "in.peerreview.radiohunt_punjabi"},
                                {"app_id": "in.peerreview.radiohunt_odia"},
                                ]
                        })
                }
                showLaunch();
        </script>
</head>
<style>
canvas{
width:1000px !important;
height:300px !important;
}
#kpi{
      height: 300px;
      width: 100%;
      overflow: scroll;
      position: relative;
      margin-bottom: 40px;
      margin-top: 20px;
    }
    .pieLegend li span {
      display: inline-block;
      width: 12px;
      height: 12px;
      margin-right: 5px;
    }

   .pieLegend {
        display: inline-block;
        float: right;
        position: absolute;
        top: 0;
    }

    #container {
      display: inline-block;
      float: left;
      height: 50%;
      width: 70%;
    }
    .pieLegend>ul{
      list-style:none;
    }
</style>

<body class="theme-light">
        <div class="flex_col" style="background: rgba(0,0,0,.1);width: 100%;height: 100%;">
                <div class="flex_row" style="    background: #000;
        color: white;">Title</div>
                <div class="flex_row" style="justify-content: flex-start;">
                        <div class="flex_col" style="width: 150px;
                padding: 10px;
                line-height: 2;
                background: #f8dbe8;">
                                <p onclick="showLaunch()">Launch State</p>
                                <p onclick="showPlayStat()">Play State </p>
                                <p onclick="showException()">Exception State</p>
                                <p onclick="showAdsStat()">Ads State</p>
                                <p onclick="showExperiments()">Experiments</p>
                                <p onclick=""><a href="http://simplestore.dipankar.co.in/api/analytics/delete?ts_insert=@3DaysOld&_confirmstr=analytics" target="_blanck">Clear Older Logs</a></p>
                        </div>
                        <div class="flex_col" style="width: 100%;">
                                <div id="kpi">
                                        <div id="container">
                                          <canvas id="topTenChart"></canvas>
                                        </div>
                                        <div id="topTenLegend" class="pieLegend"></div>
                                </div>
                                <div id="kpi">
                                        <div id="container">
                                          <canvas id="timelineChart"></canvas>
                                        </div>
                                        <div id="timelineLegend" class="pieLegend"></div>
                                </div>
                        </div>
                </div>
        </div>
</body>

</html>